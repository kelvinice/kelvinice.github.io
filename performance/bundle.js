!function a(r,s,u){function l(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};r[t][0].call(o.exports,function(e){return l(r[t][1][e]||e)},o,o.exports,a,r,s,u)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./module/context/core/scene/sceneEngine"),a=e("./module/context/generals/global"),r=e("./script/game/scenes/menuScene");window.onload=function(){!function(){var e=document.getElementsByTagName("canvas")[0],t=o.default.getInstance();t.initCanvas(e),t.makeWindowReactive();var n=a.default.getInstance().assetManager;n.addPath("path","path.png"),n.addPath("stone","stone.png"),n.addPath("brick","brick.png"),n.addPath("switchBlue","switchBlue.png"),n.addPath("switchRed","switchRed.png"),n.addPath("switchGreen","switchGreen.png"),n.addPath("player","player.png"),n.addPath("slime","slime.png"),n.addPath("arrow","arrow.png"),n.addPath("bow","bow.png"),n.addPath("heart","hudHeart_full.png"),n.addPath("crosshair","crosshair.png"),n.addPath("skeleton","skeleton.png"),n.addPath("sunStrike","sunStrike.png"),n.addPath("hit","hit.png"),n.addPath("fireball","fireball.png"),n.addPath("background","background.png"),n.addPath("boss","boss.png"),n.addPath("energy","energy.png"),n.addPath("dark-arrow","dark-arrow.png"),n.addPath("dark-sunStrike","dark-sunStrike.png");for(var i=0;i<10;i++)n.addPath("hud"+i,"hud"+i+".png");n.addAssetDoneListener(function(){t.updateScene(new r.default),t.start()}),n.loadAsset()}()}},{"./module/context/core/scene/sceneEngine":10,"./module/context/generals/global":12,"./script/game/scenes/menuScene":45}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.setMaximize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},o.prototype.resizeCanvas=function(){this.setMaximize(),null!=this.reactiveListener&&this.reactiveListener(this.getWidthCanvas(),this.getHeightCanvas())},o.prototype.makeWindowReactive=function(){var e=this;window.addEventListener("resize",function(){return e.resizeCanvas()},!1)},o.prototype.setReactiveListener=function(e){this.reactiveListener=e},o.prototype.getContext2d=function(){return this.canvas.getContext("2d")},o.prototype.getWidthCanvas=function(){return this.canvas.width},o.prototype.getHeightCanvas=function(){return this.canvas.height},o);function o(e){this.canvas=e,this.reactiveListener=null}n.default=i},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"begin",{get:function(){return this._begin},set:function(e){this._begin=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"end",{get:function(){return this._end},set:function(e){this._end=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=e},enumerable:!0,configurable:!0}),o);function o(e,t,n,i){this._name=e,this._begin=t,this._end=n,this._delay=i}n.default=i},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./animation"),i=(a.prototype.addAnimation=function(e,t,n,i){this.animations.push(new o.default(e,t,n,i))},a.prototype.setAnim=function(e){if(null==this.activeAnimation||this.activeAnimation.name!==e){for(var t=0,n=this.animations;t<n.length;t++){var i=n[t];if(i.name===e)return this.activeAnimation=i,this.index=i.begin,void(this.counter=0)}console.log("Animation name not found")}},a.prototype.updateAnimation=function(e){void 0===e&&(e=1e3/60),null!=this.activeAnimation&&(this.counter+=e,this.counter>=this.activeAnimation.delay&&(this.counter%=this.activeAnimation.delay,null!=this.frameListener&&this.frameListener.onFrameChanged(this.index),this.index++,this.index>this.activeAnimation.end?this.index=this.activeAnimation.begin:this.index<this.activeAnimation.begin&&(this.index=this.activeAnimation.end)))},a.prototype.addFrameListener=function(e){this.frameListener=e},a);function a(){this.animations=[],this.counter=0,this.frameListener=null}n.default=i},{"./animation":3}],5:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./imageGameObject"),s=e("../animations/animationController"),u=(a=r.default,o(l,a),l.prototype.drawAnimationOnXY=function(e,t,n){var i=this.rectangles[this.animationController.index];e.drawImage(this.image,i.x,i.y,i.width,i.height,t-this.leftPadding,n-this.topPadding,this.width+this.leftPadding+this.rightPadding,this.height+this.topPadding+this.bottomPadding)},l.prototype.draw=function(e,t){this.drawAnimationOnXY(e,this.x,this.y),-1!=this.previousTime.valueOf()&&this.animationController.updateAnimation(t.valueOf()-this.previousTime.valueOf()),this.previousTime=Number(t)},l.prototype.update=function(){},l);function l(e,t){var n=a.call(this,e,t)||this;return n.animationController=new s.default,n.previousTime=Number(-1),n}n.default=u},{"../animations/animationController":4,"./imageGameObject":7}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../script/game/model/point"),o=e("../../../../script/general/guid"),a=(Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),r.prototype.setZIndex=function(e){return this.zIndex=e,this},r.prototype.isIntersect=function(e){return this.x<=e.x+e.width&&this.x+this.width>=e.x&&this.y<=e.y+e.height&&this.y+this.height>=e.y},r.prototype.isIntersectSoft=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y},r.prototype.isHorizontalLinearIntersect=function(e){return this.x<=e.x+e.width&&this.x+this.width>=e.x&&this.y<=e.y+e.height/2&&this.y+this.height>=e.y+e.height/2},r.prototype.isIn=function(e,t){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t},r.prototype.getMiddlePoint=function(){var e=this.x+this.width/2,t=this.y+this.height/2;return new i.default(Math.round(e),Math.round(t))},r.prototype.setMiddlePoint=function(e){return this.x=e.x-this.width/2,this.y=e.y-this.height/2,this},r.prototype.fillHitBox=function(e,t){e.fillStyle=t;var n=this.getHitBox();e.fillRect(n.x,n.y,n.width,n.height)},r.prototype.destroy=function(){this._isDestroyed=!0},r.prototype.restore=function(){this._isDestroyed=!1},Object.defineProperty(r.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),r.prototype.getHitBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isCollide=function(e){var t=this.getHitBox(),n=e.getHitBox();return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.y+t.height>n.y},r);function r(e){this.zIndex=0,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this._isDestroyed=!1,this._id=o.default.newGuid()}n.default=a},{"../../../../script/game/model/point":36,"../../../../script/general/guid":46}],7:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./gameObject"),s=(a=r.default,o(u,a),Object.defineProperty(u.prototype,"image",{get:function(){return this._image},set:function(e){this._image=e},enumerable:!0,configurable:!0}),u.prototype.update=function(){},u.prototype.draw=function(e,t){e.drawImage(this._image,this.x-this.leftPadding,this.y-this.topPadding,this.width+this.leftPadding+this.rightPadding,this.height+this.topPadding+this.bottomPadding)},u);function u(e,t){void 0===t&&(t=null);var n=a.call(this,e)||this;return n._image=t,n.horizontalPadding=0,n.topPadding=0,n.bottomPadding=0,n.leftPadding=0,n.rightPadding=0,n}n.default=s},{"./gameObject":6}],8:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./gameObject"),s=(a=r.default,o(u,a),u.prototype.draw=function(e,t){},u.prototype.update=function(){},u);function u(e){return a.call(this,e)||this}n.default=s},{"./gameObject":6}],9:[function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=(a.prototype.addGameObject=function(e){this.gameObjects.push(e),this.reorderZIndex()},a.prototype.reorderZIndex=function(){this.gameObjects.sort(function(e,t){return e.zIndex-t.zIndex})},a.prototype.mouseContextMenu=function(e){},a.prototype.mouseClick=function(e){},a.prototype.mouseMove=function(e){},a.prototype.mouseDown=function(e){},a.prototype.mouseUp=function(e){},a.prototype.keyDown=function(e){},a.prototype.keyUp=function(e){},a.prototype.processRender=function(t,n){i(this.gameObjects).forEach(function(e){e.draw(t,n)}),this.onRender(t)},a.prototype.processUpdate=function(){i(this.gameObjects).forEach(function(e){e.update()}),this.onUpdate(),this.deleteTrash()},a.prototype.deleteTrash=function(){for(var e=0,t=this.gameObjects.filter(function(e){return e.isDestroyed});e<t.length;e++){var n=t[e];this.noticeDelete(n)}this.gameObjects=this.gameObjects.filter(function(e){return!e.isDestroyed})},a.prototype.noticeDelete=function(e){},a);function a(){this.gameObjects=[],this.lapseTime=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps}n.default=o},{}],10:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,r,s,u){return new(s=s||Promise)(function(n,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function o(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,o)}a((u=u.apply(e,r||[])).next())})},s=this&&this.__generator||function(n,i){var o,a,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(r=2&t[0]?a.return:t[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,t[1])).done)return r;switch(a=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(n,s)}catch(e){t=[6,e],a=0}finally{o=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../generals/global"),a=e("../../../canvasController"),r=e("../../../../script/handlers/timeCounter"),u=(l.prototype.getFPSRealization=function(){return this.fpsRealization},l.prototype.deltaTime=function(){return(this.getTime()-this.last_time)/1e3},l.prototype.deltaTimeMili=function(){return this.getTime()-this.last_time},l.prototype.getTime=function(){return(new Date).getTime()},l.prototype.initCanvas=function(e){var t=this;this.readyStatus=!1,this.canvas=e,this.canvasController=new a.default(this.canvas),this.ctx=this.canvasController.getContext2d(),this.currentScene=null,this.canvasController.setMaximize(),o.default.getInstance().width=this.canvasController.getWidthCanvas(),o.default.getInstance().height=this.canvasController.getHeightCanvas(),e.addEventListener("mousemove",function(e){return t.mouseMove(e)}),e.addEventListener("mousedown",function(e){return t.mouseDown(e)}),e.addEventListener("mouseup",function(e){return t.mouseUp(e)}),document.addEventListener("contextmenu",function(e){return t.mouseContextMenu(e)}),window.addEventListener("keydown",function(e){return t.keyDown(e)}),this.renderTimeCounter=new r.default(this.frameTime),this.clearTimeCounter=new r.default(2*this.frameTime)},l.prototype.mouseContextMenu=function(e){e.preventDefault(),null!=this.currentScene&&this.currentScene.mouseContextMenu(e)},l.prototype.keyDown=function(e){null!=this.currentScene&&this.currentScene.keyDown(e)},l.prototype.keyUp=function(e){null!=this.currentScene&&this.currentScene.keyUp(e)},l.prototype.mouseDown=function(e){null!=this.currentScene&&this.currentScene.mouseDown(e)},l.prototype.mouseUp=function(e){null!=this.currentScene&&this.currentScene.mouseUp(e)},l.prototype.mouseMove=function(e){null!=this.currentScene&&this.currentScene.mouseMove(e)},l.prototype.mouseClick=function(e){null!=this.currentScene&&this.currentScene.mouseClick(e)},l.prototype.getCanvasController=function(){return this.canvasController},l.getInstance=function(){return null==this.instance&&(this.instance=new l),this.instance},l.prototype.start=function(){var t=this;this.canvasController.setMaximize(),this.recurrentUpdate(),requestAnimationFrame(function(e){return t.render(e)})},l.prototype.render=function(e){var t=this;1==this.readyStatus&&(this.renderTimeCounter.setTargetTime(1e3/this.getFPSRealization()),o.default.getInstance().fpsCap&&!this.renderTimeCounter.updateTimeByCurrentTimeMili(e.valueOf())||(o.default.getInstance().clearCap&&!this.clearTimeCounter.updateTimeByCurrentTimeMili(e.valueOf())||this.ctx.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height),this.currentScene.processRender(this.ctx,e))),requestAnimationFrame(function(e){return t.render(e)})},l.prototype.recurrentUpdate=function(){return i(this,void 0,void 0,function(){var n,i,o,a,r;return s(this,function(e){switch(e.label){case 0:return n=this,[4,(new Date).getTime()];case 1:n.previousTime=e.sent(),e.label=2;case 2:return[4,this.update()];case 3:return e.sent(),[4,(new Date).getTime()];case 4:return[4,(i=e.sent())-this.previousTime];case 5:return o=e.sent(),0<(a=this.frameTime-o)?[4,(t=o,new Promise(function(e){return setTimeout(e,t)}))]:[3,7];case 6:return e.sent(),this.fpsRealization=1e3/(o+a),[3,8];case 7:this.fpsRealization=1e3/o,e.label=8;case 8:return r=this,[4,i];case 9:return r.previousTime=e.sent(),[3,2];case 10:return[2]}var t})})},l.prototype.update=function(){this.currentScene.processUpdate(),this.last_time=this.getTime()},l.prototype.makeWindowReactive=function(){this.canvasController.setReactiveListener(this.handleWindowListener),this.canvasController.makeWindowReactive()},l.prototype.handleWindowListener=function(e,t){o.default.getInstance().width=e,o.default.getInstance().height=t,window.location.reload()},l.prototype.updateScene=function(e){this.readyStatus=!1,this.currentScene=e,this.currentScene.onCreated(),this.readyStatus=!0},l.prototype.injectGameObject=function(e){null!=this.currentScene&&this.currentScene.addGameObject(e)},l.prototype.reorderZIndex=function(){null!=this.currentScene&&this.currentScene.reorderZIndex()},l.prototype.hideCursor=function(){this.canvas.style.cursor="none"},l.prototype.showCursor=function(){this.canvas.style.cursor="default"},l.instance=null,l);function l(){this.fpsRealization=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this.last_time=this.getTime()}n.default=u},{"../../../../script/handlers/timeCounter":54,"../../../canvasController":2,"../../generals/global":12}],11:[function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=(a.prototype.addPath=function(e,t){this.ipaths.push({name:e,path:t})},a.prototype.addAssetDoneListener=function(e){this.assetDone=e},a.prototype.loadAsset=function(){var o=this;i(this.ipaths).forEach(function(e){var t=e.name,n=e.path,i=new Image;i.src="./assets/images/"+n,i.onload=function(){o.loadedImage[t]=i,o.doneCount++,o.check()}})},a.prototype.check=function(){this.doneCount==this.ipaths.length&&this.assetDone()},a.prototype.loadImage=function(e){var t=new Image;return t.src="./assets/images/"+e,t},a);function a(){this.ipaths=[],this.assetDone=null,this.images=[],this.doneCount=0,this.loadedImage={}}n.default=o},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./asset"),o=(a.getInstance=function(){return null===this.instance&&(this.instance=new a),this.instance},a.instance=null,a);function a(){this.width=0,this.height=0,this.debug=!1,this.assetManager=new i.default,this.name="",this.tile_size=50,this.fpsCap=!0,this.clearCap=!1}n.default=o},{"./asset":11}],13:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,l=e("./point"),r=e("../../../module/context/core/gameObjects/imageGameObject"),s=e("../../../module/context/generals/global"),u=e("../../../module/context/generals/global"),h=(a=r.default,o(c,a),c.prototype.draw=function(e,t){u.default.getInstance().debug&&this.fillHitBox(e,"black");var n=this.x+this.width,i=this.y+this.height;e.save(),e.translate(n,i),e.rotate(Math.PI/180*this.rotation),e.translate(-n,-i),a.prototype.draw.call(this,e,t),e.restore()},c.prototype.update=function(){this.rotation=(this.rotation+1)%360;var e=this.target.getMiddlePoint(),t=this.getMiddlePoint(),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),o=n+i,a=n/o,r=i/o,s=1,u=1;e.x<t.x&&(s=-1),e.y<t.y&&(u=-1),this.setMiddlePoint(new l.default(t.x+3*s*a,t.y+3*u*r)),this.isCollide(this.target)&&(this.target.hp+=5,this.target.hp>this.target.maxHp&&(this.target.hp=this.target.maxHp),this.destroy())},c);function c(e,t){var n=a.call(this,e,s.default.getInstance().assetManager.loadedImage.energy)||this;return n.target=t,n.setZIndex(20),n.rotation=0,n}n.default=h},{"../../../module/context/core/gameObjects/imageGameObject":7,"../../../module/context/generals/global":12,"./point":36}],14:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=e("../../../../module/context/generals/global"),u=(a=r.default,o(l,a),l);function l(e){return a.call(this,e,s.default.getInstance().assetManager.loadedImage.crosshair)||this}n.default=u},{"../../../../module/context/core/gameObjects/imageGameObject":7,"../../../../module/context/generals/global":12}],15:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./bossBehavior"),s=e("./SpearBehavior"),u=e("../../../scenes/gameScene"),l=(a=r.default,o(h,a),h.prototype.onBehaviorComplete=function(){u.default.spawnHandler.setWillSpawn(!1)},h.prototype.getNextBehavior=function(){return new s.default(this.behaviorHandler)},h.prototype.onBehaviorUpdate=function(){},h);function h(e){var t=a.call(this,7e3,e)||this;return u.default.spawnHandler.changeAllSpawner(),u.default.spawnHandler.valueToSpawn=1,u.default.spawnHandler.setWillSpawn(!0),new Audio("assets/sounds/boss_spawn.mp3").play(),t}n.default=l},{"../../../scenes/gameScene":44,"./SpearBehavior":16,"./bossBehavior":19}],16:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("./bossBehavior"),u=e("./SunStrikeBehavior"),l=e("../enemyArrow"),h=e("../../../scenes/gameScene"),c=e("../../../../../module/context/core/scene/sceneEngine"),d=e("../../../../handlers/calculator"),p=(r=s.default,o(f,r),f.prototype.onBehaviorComplete=function(){for(var e=0,t=a(this.spears);e<t.length;e++)t[e].speed=5;new Audio("assets/sounds/boss_attack.mp3").play()},f.prototype.getNextBehavior=function(){return new u.default(this.behaviorHandler)},f.prototype.addSpear=function(e,t,n){var i=2*h.default.TILE_SIZE/3,o=new l.default({x:e,y:t,width:i,height:i},n);this.spears.push(o),c.default.getInstance().injectGameObject(o)},f.prototype.onBehaviorUpdate=function(){r.prototype.onBehaviorUpdate.call(this);for(var e=this.behaviorHandler.boss.player,t=0,n=a(this.spears);t<n.length;t++){var i=n[t];i.setVel(d.default.calculateVelocity(i.getMiddlePoint(),e.getMiddlePoint()))}},f);function f(e){var t=r.call(this,5e3,e)||this;t.spears=[];var n=t.behaviorHandler.boss;return t.addSpear(n.x-h.default.TILE_SIZE,n.y-h.default.TILE_SIZE,n.player),t.addSpear(n.x-h.default.TILE_SIZE,n.y+h.default.TILE_SIZE+n.height,n.player),t.addSpear(n.x+h.default.TILE_SIZE+n.width,n.y-h.default.TILE_SIZE,n.player),t.addSpear(n.x+h.default.TILE_SIZE+n.width,n.y+h.default.TILE_SIZE+n.height,n.player),t}n.default=p},{"../../../../../module/context/core/scene/sceneEngine":10,"../../../../handlers/calculator":48,"../../../scenes/gameScene":44,"../enemyArrow":23,"./SunStrikeBehavior":18,"./bossBehavior":19}],17:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./bossBehavior"),s=e("./SpawnBehavior"),u=e("../../../../handlers/timeCounter"),l=e("../../../../../module/context/core/scene/sceneEngine"),h=e("../../../../handlers/trueRandom"),c=e("../../../scenes/gameScene"),d=e("../../chaserAnimation"),p=(a=r.default,o(f,a),f.prototype.onBehaviorComplete=function(){this.sound.pause()},f.prototype.getNextBehavior=function(){return new s.default(this.behaviorHandler)},f.prototype.onBehaviorUpdate=function(){var e,t,n,i;a.prototype.onBehaviorUpdate.call(this),this.timeCounter.updateTimeCounter(l.default.getInstance().deltaTimeMili())&&(e=this.behaviorHandler.boss.player,t=this.trueRandom.randomNumber(Math.round(c.default.TILE_SIZE/10),Math.round(c.default.TILE_SIZE/3)),n=this.trueRandom.randomNumber(e.x,e.x+e.width),i=this.trueRandom.randomNumber(e.y,e.y+e.height),l.default.getInstance().injectGameObject(new d.default({x:n,y:i,width:t,height:t},this.behaviorHandler.boss)))},f);function f(e){var t=a.call(this,5e3,e)||this;return t.timeCounter=new u.default(100),t.trueRandom=new h.default,t.trueRandom.randSeed(),t.sound=new Audio("assets/sounds/drain.mp3"),t.sound.loop=!0,t.sound.play(),t}n.default=p},{"../../../../../module/context/core/scene/sceneEngine":10,"../../../../handlers/timeCounter":54,"../../../../handlers/trueRandom":55,"../../../scenes/gameScene":44,"../../chaserAnimation":13,"./SpawnBehavior":15,"./bossBehavior":19}],18:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./bossBehavior"),s=e("./SuckBehavior"),u=e("../../../../handlers/timeCounter"),l=e("../../../../../module/context/core/scene/sceneEngine"),h=e("../../../../handlers/trueRandom"),c=e("../enemySunStrike"),d=e("../../../scenes/gameScene"),p=(a=r.default,o(f,a),f.prototype.onBehaviorComplete=function(){},f.prototype.getNextBehavior=function(){return new s.default(this.behaviorHandler)},f.prototype.onBehaviorUpdate=function(){var e,t,n,i;this.sunStrikeTimer.updateTimeCounter(l.default.getInstance().deltaTimeMili())&&(e=this.behaviorHandler.boss.player,t=this.trueRandom.randomNumber(e.x-3*d.default.TILE_SIZE,e.x+3*d.default.TILE_SIZE),n=this.trueRandom.randomNumber(e.y-3*d.default.TILE_SIZE,e.y+3*d.default.TILE_SIZE),i=new c.default({x:t,y:n,width:d.default.TILE_SIZE,height:d.default.TILE_SIZE},e),l.default.getInstance().injectGameObject(i))},f);function f(e){var t=a.call(this,5e3,e)||this;return t.sunStrikeTimer=new u.default(500),t.trueRandom=new h.default,t.trueRandom.randSeed(),t}n.default=p},{"../../../../../module/context/core/scene/sceneEngine":10,"../../../../handlers/timeCounter":54,"../../../../handlers/trueRandom":55,"../../../scenes/gameScene":44,"../enemySunStrike":24,"./SuckBehavior":17,"./bossBehavior":19}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.onBehaviorUpdate=function(){},o);function o(e,t){this.behaviorDuration=e,this.behaviorHandler=t}n.default=i},{}],20:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./bossBehavior"),s=e("./SpearBehavior"),u=(a=r.default,o(l,a),l.prototype.getNextBehavior=function(){return new s.default(this.behaviorHandler)},l.prototype.onBehaviorComplete=function(){},l);function l(e){return a.call(this,3e3,e)||this}n.default=u},{"./SpearBehavior":16,"./bossBehavior":19}],21:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var u,a=e("./enemy"),r=e("../../../handlers/imageHandler"),l=e("../../../../module/context/generals/global"),h=e("../../../handlers/trueRandom"),c=e("../../scenes/gameScene"),d=e("../../../../module/context/core/scene/sceneEngine"),p=e("../../../handlers/bossBehaviorHandler"),f=e("../point"),m=e("../../../handlers/timeCounter"),g=e("../../../../module/context/generals/global"),y=(u=a.default,o(v,u),v.prototype.update=function(){u.prototype.update.call(this),this.player.getMiddlePoint().x>this.getMiddlePoint().x?this.animationController.setAnim("right"):this.player.getMiddlePoint().x<this.getMiddlePoint().x&&this.animationController.setAnim("left"),this.bossBehaviorHandler.update()},v.prototype.pathFind=function(e,t,n){},v.prototype.draw=function(e,t){g.default.getInstance().debug&&this.fillHitBox(e,"blue"),this.shadowTimer.updateTimeByCurrentTimeMili(t.valueOf())&&this.shadows.shift();for(var n=s(this.shadows).length,i=0,o=0,a=this.shadows;o<a.length;o++){var r=a[o];e.globalAlpha=1/n*i+.1,this.drawAnimationOnXY(e,r.x,r.y),i++}e.globalAlpha=1,u.prototype.draw.call(this,e,t)},v.prototype.onHitWithPlayer=function(){this.blink()},v.prototype.blink=function(){for(var e=0,t=0;e=this.trueRandom.randomNumber(c.default.TILE_SIZE+this.width,d.default.getInstance().canvas.width-(c.default.TILE_SIZE+this.width)),t=this.trueRandom.randomNumber(c.default.TILE_SIZE+this.height,d.default.getInstance().canvas.height-(c.default.TILE_SIZE+this.height)),this.player.isIntersectSoft({x:e,y:t,width:this.width,height:this.height}););var n=Math.abs(e-this.x),i=Math.abs(t-this.y),o=n+i,a=1,r=1;e<this.x&&(a=-1),t<this.y&&(r=-1);for(var s=o/50,u=0;u<s;u++)this.shadows.push(new f.default(this.x+a*n/s*u,this.y+r*i/s*u));this.shadowTimer.setTargetTime(250/s),this.shadowTimer.resetCounter(),this.x=e,this.y=t},v);function v(e,t){var n=u.call(this,e,l.default.getInstance().assetManager.loadedImage.boss)||this;return n.shadows=[],n.rectangles=r.splitSprite(n.image,5,2),n.animationController.addAnimation("right",0,4,200),n.animationController.addAnimation("left",5,9,200),n.animationController.setAnim("right"),n.movementSpeed=0,n.initHP(1500),n.player=t,n.trueRandom=new h.default,n.trueRandom.randSeed(),n.bossBehaviorHandler=new p.default(n),n.shadowTimer=new m.default(50),n.sound=new Audio("assets/sounds/boss_intro.mp3"),n.sound.play(),n}n.default=y},{"../../../../module/context/core/scene/sceneEngine":10,"../../../../module/context/generals/global":12,"../../../handlers/bossBehaviorHandler":47,"../../../handlers/imageHandler":49,"../../../handlers/timeCounter":54,"../../../handlers/trueRandom":55,"../../scenes/gameScene":44,"../point":36,"./enemy":22}],22:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/animateGameObject"),s=e("../tiles/tile"),d=e("../../scenes/gameScene"),u=(a=r.default,o(l,a),Object.defineProperty(l.prototype,"maxHp",{get:function(){return this._maxHp},set:function(e){this._maxHp=e},enumerable:!0,configurable:!0}),l.prototype.draw=function(e,t){a.prototype.draw.call(this,e,t);var n=this.width-3,i=this.hp/this.maxHp*n,o=this.damagedHP/this.maxHp*n;e.fillStyle="black",e.fillRect(this.x,this.y+this.height,this.width,8),e.fillStyle="green",e.fillRect(this.x+1.5,this.y+this.height+1.5,i,5),e.fillStyle="red",e.fillRect(this.x+1.5+i,this.y+this.height+1.5,o,5),0<this.damagedHP&&(this.damagedHP-=1.5,this.damagedHP<0&&(this.damagedHP=0))},l.prototype.update=function(){a.prototype.update.call(this),this.x+=this.velX*this.movementSpeed,this.y+=this.velY*this.movementSpeed},Object.defineProperty(l.prototype,"hp",{get:function(){return this._hp},set:function(e){this._hp=e},enumerable:!0,configurable:!0}),l.prototype.initHP=function(e){this.maxHp=e,this.hp=e},l.prototype.reduceHP=function(e){this.hp-=e,this.damagedHP+=e,this.setZIndex(this.zIndex+1),this.hp<=0&&(this.hp=0,this.destroy())},l.prototype.isWalkAble=function(e){return e.baseWeight!=s.default.WALL&&e.baseWeight!=s.default.GRASS},l.prototype.pathFind=function(e,t,n){for(var i=[],o=1;o<e.length-1;o++)for(var a=1;a<e[o].length-1;a++)e[o][a].init();var r=e[t][n];r.totalWeight=0;var s,u,l=e[Math.round(this.x/d.default.TILE_SIZE)][Math.round(this.y/d.default.TILE_SIZE)];for(i.push(r);0<i.length&&-1==l.parentX;){i.sort(function(e,t){return e.totalWeight-t.totalWeight});var h,c=i.shift();!e[c.x][c.y+1].isOpen&&this.isWalkAble(e[c.x][c.y+1])&&(h=c.totalWeight+e[c.x][c.y+1].baseWeight)<=e[c.x][c.y+1].totalWeight&&(e[c.x][c.y+1].totalWeight=h,e[c.x][c.y+1].parentX=c.x,e[c.x][c.y+1].parentY=c.y,i.push(e[c.x][c.y+1]),e[c.x][c.y+1].isOpen=!0),!e[c.x-1][c.y].isOpen&&this.isWalkAble(e[c.x-1][c.y])&&(h=c.totalWeight+e[c.x-1][c.y].baseWeight)<=e[c.x-1][c.y].totalWeight&&(e[c.x-1][c.y].totalWeight=h,e[c.x-1][c.y].parentX=c.x,e[c.x-1][c.y].parentY=c.y,i.push(e[c.x-1][c.y]),e[c.x-1][c.y].isOpen=!0),!e[c.x+1][c.y].isOpen&&this.isWalkAble(e[c.x+1][c.y])&&(h=c.totalWeight+e[c.x+1][c.y].baseWeight)<=e[c.x+1][c.y].totalWeight&&(e[c.x+1][c.y].totalWeight=h,e[c.x+1][c.y].parentX=c.x,e[c.x+1][c.y].parentY=c.y,i.push(e[c.x+1][c.y]),e[c.x+1][c.y].isOpen=!0),!e[c.x][c.y-1].isOpen&&this.isWalkAble(e[c.x][c.y-1])&&(h=c.totalWeight+e[c.x][c.y-1].baseWeight)<=e[c.x][c.y-1].totalWeight&&(e[c.x][c.y-1].totalWeight=h,e[c.x][c.y-1].parentX=c.x,e[c.x][c.y-1].parentY=c.y,i.push(e[c.x][c.y-1]),e[c.x][c.y-1].isOpen=!0)}-1!=l.parentY?(s=l.parentX*d.default.TILE_SIZE,u=l.parentY*d.default.TILE_SIZE,this.x<s?this.velX=1:this.x>s?this.velX=-1:this.velX=0,this.y<u?this.velY=1:this.y>u?this.velY=-1:this.velY=0):console.log("path not found")},l.prototype.onHitWithPlayer=function(){this.destroy()},l);function l(e,t){void 0===t&&(t=null);var n=a.call(this,e,t)||this;return n.velX=0,n.velY=0,n.movementSpeed=1,n.damagedHP=0,n.setZIndex(15),n}n.default=u},{"../../../../module/context/core/gameObjects/animateGameObject":5,"../../scenes/gameScene":44,"../tiles/tile":42}],23:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=e("../../../../module/context/generals/global"),u=e("../../../../module/context/generals/global"),l=e("../../scenes/gameScene"),h=(a=r.default,o(c,a),c.prototype.checkOutOfRange=function(){(this.x<0-l.default.TILE_SIZE||this.y<0-l.default.TILE_SIZE||this.x+this.width>u.default.getInstance().width+l.default.TILE_SIZE||this.y+this.height>u.default.getInstance().height+l.default.TILE_SIZE)&&this.destroy()},c.prototype.update=function(){0<this.speed&&(this.x+=this.velX*this.speed,this.y+=this.velY*this.speed,this.checkOutOfRange(),this.target.isCollide(this)&&(this.target.onHitWithEnemy(),this.destroy()))},c.prototype.draw=function(e,t){s.default.getInstance().debug&&this.fillHitBox(e,"orange");var n=this.x+.5*this.width,i=this.y+.5*this.height;e.save(),e.translate(n,i),e.rotate(Math.PI/180*this.rotation),e.translate(-n,-i),e.drawImage(this.image,this.x,this.y,this.width,2*this.height),e.restore()},c.prototype.setVel=function(e){this.velX=e.x,this.velY=e.y,this.rotation=180+Math.atan2(this.velX,this.velY)/(2*Math.PI)*360*-1},c);function c(e,t){var n=a.call(this,e,s.default.getInstance().assetManager.loadedImage["dark-arrow"])||this;return n.target=t,n.setZIndex(20),n.speed=0,n.rotation=0,n.velX=0,n.velY=0,n}n.default=h},{"../../../../module/context/core/gameObjects/imageGameObject":7,"../../../../module/context/generals/global":12,"../../scenes/gameScene":44}],24:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/animateGameObject"),s=e("../../../../module/context/generals/global"),u=e("../../../handlers/imageHandler"),l=e("../../scenes/gameScene"),h=e("../../../../module/context/generals/global"),c=(a=r.default,o(d,a),d.prototype.draw=function(e,t){h.default.getInstance().debug&&this.fillHitBox(e,"red"),a.prototype.draw.call(this,e,t)},d.prototype.getHitBox=function(){return{x:this.x-l.default.TILE_SIZE/2,y:this.y-Math.round(l.default.TILE_SIZE/3),width:2*l.default.TILE_SIZE,height:l.default.TILE_SIZE}},d.prototype.onFrameChanged=function(e){24==e?this.willDmg=!0:29==e&&this.destroy()},d.prototype.update=function(){this.willDmg&&this.target.isCollide(this)&&(this.target.onHitWithEnemy(),this.destroy())},d);function d(e,t){var n=a.call(this,e,s.default.getInstance().assetManager.loadedImage["dark-sunStrike"])||this;return n.target=t,n.setZIndex(30),n.rectangles=u.splitSprite(n.image,5,6),n.animationController.addAnimation("burn",0,29,80),n.animationController.setAnim("burn"),n.topPadding=3*l.default.TILE_SIZE,n.leftPadding=2*l.default.TILE_SIZE,n.rightPadding=2*l.default.TILE_SIZE,n.animationController.addFrameListener(n),n.willDmg=!1,n.damage=150,new Audio("assets/sounds/SunStrike.mp3").play(),n}n.default=c},{"../../../../module/context/core/gameObjects/animateGameObject":5,"../../../../module/context/generals/global":12,"../../../handlers/imageHandler":49,"../../scenes/gameScene":44}],25:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./enemy"),s=e("../../../handlers/imageHandler"),u=e("../../../../module/context/generals/global"),l=(a=r.default,o(h,a),h.prototype.update=function(){a.prototype.update.call(this),0<this.velX?this.animationController.setAnim("right"):this.velX<0?this.animationController.setAnim("left"):this.velY<0?this.animationController.setAnim("up"):0<this.velY&&this.animationController.setAnim("down")},h.prototype.draw=function(e,t){u.default.getInstance().debug&&this.fillHitBox(e,"red"),a.prototype.draw.call(this,e,t)},h.prototype.getHitBox=function(){return{x:this.x+this.width/2/2,y:this.y+this.height/9,width:this.width/2,height:this.height/9*8}},h);function h(e,t){var n=a.call(this,e,t)||this;return n.image=t,n.rectangles=s.splitSprite(t,9,4),n.animationController.addAnimation("up",0,8,100),n.animationController.addAnimation("left",9,17,100),n.animationController.addAnimation("down",18,26,100),n.animationController.addAnimation("right",27,35,100),n.animationController.setAnim("down"),n.movementSpeed=1,n.initHP(100),n}n.default=l},{"../../../../module/context/generals/global":12,"../../../handlers/imageHandler":49,"./enemy":22}],26:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./spawner"),s=e("../../scenes/gameScene"),u=e("./skeleton"),l=e("../../../../module/context/generals/global"),h=(a=r.default,o(c,a),c.prototype.spawn=function(){return new u.default({x:this.x,y:this.y,width:s.default.TILE_SIZE,height:s.default.TILE_SIZE},this.enemyImage)},c);function c(e){return a.call(this,e,l.default.getInstance().assetManager.loadedImage.switchRed,l.default.getInstance().assetManager.loadedImage.skeleton)||this}n.default=h},{"../../../../module/context/generals/global":12,"../../scenes/gameScene":44,"./skeleton":25,"./spawner":29}],27:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./enemy"),s=e("../../../handlers/imageHandler"),u=e("../../../../module/context/generals/global"),l=(a=r.default,o(h,a),h.prototype.update=function(){a.prototype.update.call(this),0<this.velX?this.animationController.setAnim("right"):this.velX<0?this.animationController.setAnim("left"):this.velY<0?this.animationController.setAnim("up"):0<this.velY&&this.animationController.setAnim("down")},h.prototype.draw=function(e,t){u.default.getInstance().debug&&this.fillHitBox(e,"blue"),a.prototype.draw.call(this,e,t)},h.prototype.getHitBox=function(){return{x:this.x+this.width/3/2,y:this.y+this.height/2,width:this.width/3*2,height:this.height/2}},h);function h(e,t){void 0===t&&(t=null);var n=a.call(this,e,t)||this;return n.image=t,n.rectangles=s.splitSprite(t,4,4),n.animationController.addAnimation("down",0,3,200),n.animationController.addAnimation("left",4,7,200),n.animationController.addAnimation("right",8,11,200),n.animationController.addAnimation("up",12,15,200),n.animationController.setAnim("down"),n.movementSpeed=.5,n.initHP(140),n}n.default=l},{"../../../../module/context/generals/global":12,"../../../handlers/imageHandler":49,"./enemy":22}],28:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./spawner"),s=e("../../../../module/context/generals/global"),u=e("../../scenes/gameScene"),l=e("./slime"),h=(a=r.default,o(c,a),c.prototype.spawn=function(){return new l.default({x:this.x,y:this.y,width:u.default.TILE_SIZE,height:u.default.TILE_SIZE},this.enemyImage)},c);function c(e){return a.call(this,e,s.default.getInstance().assetManager.loadedImage.switchGreen,s.default.getInstance().assetManager.loadedImage.slime)||this}n.default=h},{"../../../../module/context/generals/global":12,"../../scenes/gameScene":44,"./slime":27,"./spawner":29}],29:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=e("../../scenes/gameScene"),u=e("./slime"),l=(a=r.default,o(h,a),h.prototype.draw=function(e,t){a.prototype.draw.call(this,e,t)},h.prototype.update=function(){},h.prototype.spawn=function(){return new u.default({x:this.x,y:this.y,width:s.default.TILE_SIZE,height:s.default.TILE_SIZE},this.enemyImage)},h);function h(e,t,n){var i=a.call(this,e,t)||this;return i.enemyImage=n,i}n.default=l},{"../../../../module/context/core/gameObjects/imageGameObject":7,"../../scenes/gameScene":44,"./slime":27}],30:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("../../../module/context/core/gameObjects/gameObject"),s=e("./huds/heart"),u=e("../../../module/context/core/scene/sceneEngine"),l=e("./huds/numberHUD"),h=e("../../../module/context/generals/global"),c=e("../scenes/gameOverScene"),d=(r=a.default,o(p,r),p.prototype.draw=function(e,t){},p.prototype.update=function(){},p.prototype.reduceHeart=function(){if(new Audio("assets/sounds/attacked.mp3").play(),this.hp--,this.hearts[this.hp].destroy(),this.hearts[this.hp],this.hp<=0)return this.bgm.pause(),u.default.getInstance().showCursor(),void u.default.getInstance().updateScene(new c.default(this.score))},p.prototype.increaseHeart=function(){this.hearts[this.hp].restore(),u.default.getInstance().injectGameObject(this.hearts[this.hp]),this.hp++},p.prototype.setScore=function(e){for(var t="",n=0;n<this.digit-1;n++)t+="0";var i=(t+e).slice(-1*this.digit);for(this.score=e,n=0;n<i.length;n++)this.numbers[n].setNumber(+i[n])},p);function p(e,t){var n=r.call(this,e)||this;n.digit=3,n.setZIndex(1e3),n.bgm=t,n.hearts=[],n.numbers=[],n.heartImage=h.default.getInstance().assetManager.loadedImage.heart,n.heartYPosition=0,n.numberYPosition=0;n.hp=3;for(var i=n.score=0;i<n.hp+2;i++){var o=new s.default({x:n.width-80*(i+1),y:n.heartYPosition,width:80,height:80},n.heartImage);o.setZIndex(n.zIndex+1),n.hearts.push(o),i<n.hp&&u.default.getInstance().injectGameObject(o)}for(i=0;i<n.digit;i++){var a=new l.default({x:n.x+80*i,y:n.numberYPosition,width:80,height:80});(n.numbers[i]=a).setZIndex(n.zIndex+1),u.default.getInstance().injectGameObject(a)}return n}n.default=d,n.padString=function(e,t){for(var n="",i=(e+"").length,o=0;o<t-i;o++)n+="0";return(n+e).slice(-1*this.digit)}},{"../../../module/context/core/gameObjects/gameObject":6,"../../../module/context/core/scene/sceneEngine":10,"../../../module/context/generals/global":12,"../scenes/gameOverScene":43,"./huds/heart":33,"./huds/numberHUD":34}],31:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../module/context/core/gameObjects/gameObject"),s=(a=r.default,o(u,a),u.prototype.draw=function(e,t){e.font="bold "+this.fontSize+"pt arial",e.fillStyle=this.color,e.fillText(this.text,this.x,this.y)},u.prototype.update=function(){},u.prototype.setColor=function(e){return this.color=e,this},u.prototype.setText=function(e){return this.text=e,this},u.prototype.setFontSize=function(e){return this.fontSize=e,this},u);function u(e,t){var n=a.call(this,{x:e.x,y:e.y,width:0,height:0})||this;return n.setZIndex(60),n.color="black",n.fontSize=10,n.text=t,n}n.default=s},{"../../../module/context/core/gameObjects/gameObject":6}],32:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../module/context/core/gameObjects/animateGameObject"),s=e("../../handlers/imageHandler"),u=e("../../../module/context/generals/global"),l=(a=r.default,o(h,a),h.prototype.draw=function(e,t){a.prototype.draw.call(this,e,t)},h.prototype.onFrameChanged=function(e){3==e&&this.destroy()},h);function h(e){var t=a.call(this,e,u.default.getInstance().assetManager.loadedImage.hit)||this;t.setZIndex(40),t.rectangles=s.splitSprite(t.image,4,1),t.animationController.addAnimation("hit",0,3,100),t.animationController.setAnim("hit"),t.animationController.addFrameListener(t);var n=new Audio("assets/sounds/hit.mp3");return n.addEventListener("canplaythrough",function(){n.play()}),t}n.default=l},{"../../../module/context/core/gameObjects/animateGameObject":5,"../../../module/context/generals/global":12,"../../handlers/imageHandler":49}],33:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=(a=r.default,o(u,a),u.prototype.draw=function(e,t){a.prototype.draw.call(this,e,t)},u.prototype.update=function(){},u);function u(e,t){return a.call(this,e,t)||this}n.default=s},{"../../../../module/context/core/gameObjects/imageGameObject":7}],34:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=e("../../../../module/context/generals/global"),u=(a=r.default,o(l,a),l.prototype.setNumber=function(e){this.image=this.images[e]},l);function l(e){for(var t=this,n=[],i=0;i<10;i++)n.push(s.default.getInstance().assetManager.loadedImage["hud"+i]);return(t=a.call(this,e,n[0])||this).images=n,t}n.default=u},{"../../../../module/context/core/gameObjects/imageGameObject":7,"../../../../module/context/generals/global":12}],35:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var h,c=e("./point"),d=e("../../handlers/calculator"),p=e("../../../module/context/generals/global"),a=e("../../../module/context/core/gameObjects/animateGameObject"),r=e("../../handlers/imageHandler"),f=e("../../../module/context/generals/global"),s=e("../../../module/context/core/scene/sceneEngine"),u=e("./textEffect"),l=e("../scenes/gameScene"),m=e("../../handlers/perkHandler"),g=(h=a.default,o(y,h),Object.defineProperty(y.prototype,"mousePoint",{get:function(){return this._mousePoint},enumerable:!0,configurable:!0}),y.prototype.draw=function(e,t){p.default.getInstance().debug&&this.fillHitBox(e,"purple"),h.prototype.draw.call(this,e,t),e.font="bold 12pt arial",e.fillStyle="black";var n=(f.default.getInstance().name.length-6)/2*10;e.fillText(f.default.getInstance().name.toUpperCase(),this.x-n,this.y),this.fireRotation=this.fireRotation+1;for(var i=this.width/3,o=0;o<y.exort;o++)this.drawFire(e,new c.default(this.x+this.width/2-i/2,this.y-this.width/2),i,360/y.exort*o);var a=new c.default(this.x,this.y),r=d.default.calculateVelocity(a,this.mousePoint),s=180+Math.atan2(r.x,r.y)/(2*Math.PI)*360*-1;a.x+=20*r.x,a.y+=20*r.y;var u=a.x+.5*this.width,l=a.y+.5*this.height;e.save(),e.translate(u,l),e.rotate(Math.PI/180*s),e.translate(-u,-l),e.drawImage(this.bowImage,a.x,a.y,this.width,this.height),e.restore()},y.prototype.drawFire=function(e,t,n,i){var o=this.getMiddlePoint().x,a=this.getMiddlePoint().y;e.save(),e.translate(o,a),e.rotate(Math.PI/180*(this.fireRotation+i)),e.translate(-o,-a),e.drawImage(this.fireBallImage,t.x,t.y,n,n),e.restore()},y.prototype.update=function(){h.prototype.update.call(this),this.x+=this.velX*y.movementSpeed,this.y+=this.velY*y.movementSpeed,0==this.velX&&0==this.velY?this.animationController.setAnim("idle"):0<this.velX?this.animationController.setAnim("right"):this.velX<0?this.animationController.setAnim("left"):this.velY<0?this.animationController.setAnim("up"):0<this.velY&&this.animationController.setAnim("down")},y.prototype.setTile=function(e,t){this.tileX=e,this.tileY=t},y.prototype.setMousePoint=function(e){this._mousePoint=e},y.prototype.getHitBox=function(){return{x:this.x+this.width/4/2,y:this.y+this.height/4/2,width:this.width/4*3,height:this.height/4*3}},y.prototype.addExort=function(){y.exort+=1,9<y.exort&&(y.exort=9)},y.prototype.useSkill=function(){var e=3;return m.default.getInstance().isActivate("sunstrikecost-1")&&(e=2),y.exort>=e&&(y.exort-=e,!0)},y.prototype.onHitWithEnemy=function(){this.gameMenu.reduceHeart(),s.default.getInstance().injectGameObject(new u.default({x:this.x,y:this.y},"Ouch..").setColor("red").setFontSize(Math.round(l.default.TILE_SIZE/5)))},y);function y(e,t){var n=h.call(this,e,f.default.getInstance().assetManager.loadedImage.player)||this;return n.velX=0,n.velY=0,n.bowImage=f.default.getInstance().assetManager.loadedImage.bow,n.fireBallImage=f.default.getInstance().assetManager.loadedImage.fireball,n._mousePoint=new c.default,y.movementSpeed=1,n.setZIndex(20),n.rectangles=r.splitSprite(n.image,13,21),n.animationController.addAnimation("up",104,112,100),n.animationController.addAnimation("left",117,125,100),n.animationController.addAnimation("down",130,138,100),n.animationController.addAnimation("right",143,151,100),n.animationController.addAnimation("idle",130,130,100),n.animationController.setAnim("idle"),n.fireRotation=0,y.exort=0,n.gameMenu=t,n}n.default=g},{"../../../module/context/core/gameObjects/animateGameObject":5,"../../../module/context/core/scene/sceneEngine":10,"../../../module/context/generals/global":12,"../../handlers/calculator":48,"../../handlers/imageHandler":49,"../../handlers/perkHandler":51,"../scenes/gameScene":44,"./point":36,"./textEffect":40}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}n.default=i},{}],37:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("./projectile"),s=e("../hitEffect"),u=e("../../scenes/gameScene"),l=e("../../../../module/context/core/scene/sceneEngine"),h=e("../../../../module/context/generals/global"),c=(a=r.default,o(d,a),d.prototype.draw=function(e){var t=this.x+.5*this.width,n=this.y+.5*this.height;a.prototype.draw.call(this,e),e.save(),e.translate(t,n),e.rotate(Math.PI/180*this.rotation),e.translate(-t,-n),e.drawImage(this.image,this.x,this.y,this.width,2*this.height),e.restore()},d.prototype.onHit=function(e){a.prototype.onHit.call(this,e);var t=new s.default({x:this.x-u.default.TILE_SIZE/2,y:this.y-u.default.TILE_SIZE/2,width:u.default.TILE_SIZE,height:u.default.TILE_SIZE});l.default.getInstance().injectGameObject(t)},d);function d(e,t){var n=a.call(this,e,t)||this;return n.image=h.default.getInstance().assetManager.loadedImage.arrow,n.rotation=180+Math.atan2(t.x,t.y)/(2*Math.PI)*360*-1,new Audio("assets/sounds/arrow.mp3").play(),n}n.default=c},{"../../../../module/context/core/scene/sceneEngine":10,"../../../../module/context/generals/global":12,"../../scenes/gameScene":44,"../hitEffect":32,"./projectile":38}],38:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/gameObject"),s=e("../../../../module/context/generals/global"),u=e("../../../../module/context/generals/global"),l=e("../../../../module/context/core/scene/sceneEngine"),h=e("../textEffect"),c=e("../../../handlers/trueRandom"),d=e("../../scenes/gameScene"),p=(a=r.default,o(f,a),f.prototype.setSpeed=function(e){return this.speed=e,this},f.prototype.draw=function(e){u.default.getInstance().debug&&this.fillHitBox(e,"green")},f.prototype.update=function(){this.x+=this.velocity.x*this.speed,this.y+=this.velocity.y*this.speed,this.checkOutOfRange()},f.prototype.checkOutOfRange=function(){(this.x<0||this.y<0||this.x+this.width>s.default.getInstance().width||this.y+this.height>s.default.getInstance().height)&&this.destroy()},f.prototype.onHit=function(e){var t;this.isDestroyed||(t=this.trueRandom.randomNumber(this.damage-10,this.damage+10),l.default.getInstance().injectGameObject(new h.default({x:Math.round(this.x).valueOf(),y:Math.round(this.y).valueOf()},t+"").setColor("white").setFontSize(Math.round(d.default.TILE_SIZE/5))),e.reduceHP(t),this.destroy())},f);function f(e,t){var n=a.call(this,e)||this;return n.speed=1,n.velocity=t,n.damage=40,n.trueRandom=new c.default,n.trueRandom.randSeed(),n}n.default=p},{"../../../../module/context/core/gameObjects/gameObject":6,"../../../../module/context/core/scene/sceneEngine":10,"../../../../module/context/generals/global":12,"../../../handlers/trueRandom":55,"../../scenes/gameScene":44,"../textEffect":40}],39:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/animateGameObject"),s=e("../../../handlers/imageHandler"),u=e("../../scenes/gameScene"),l=e("../../../../module/context/generals/global"),h=e("../../../../module/context/core/scene/sceneEngine"),c=e("../textEffect"),d=e("../../../../module/context/generals/global"),p=e("../../../handlers/perkHandler"),f=(a=r.default,o(m,a),m.prototype.draw=function(e,t){l.default.getInstance().debug&&this.fillHitBox(e,"green"),a.prototype.draw.call(this,e,t)},m.prototype.getHitBox=function(){return{x:this.x-u.default.TILE_SIZE/2,y:this.y-Math.round(u.default.TILE_SIZE/3),width:2*u.default.TILE_SIZE,height:u.default.TILE_SIZE}},m.prototype.onFrameChanged=function(e){24==e?this.willDmg=!0:29==e&&this.destroy()},m.prototype.onHit=function(e){var t;this.isDestroyed||(t=this.damage,p.default.getInstance().isActivate("sunstrikedmg+50")&&(t+=50),e.reduceHP(this.damage),h.default.getInstance().injectGameObject(new c.default({x:this.x,y:this.y},t+"").setColor("yellow").setFontSize(Math.round(u.default.TILE_SIZE/5))),this.willDmg=!1)},m);function m(e){var t=a.call(this,e,d.default.getInstance().assetManager.loadedImage.sunStrike)||this;return t.setZIndex(40),t.rectangles=s.splitSprite(t.image,5,6),t.animationController.addAnimation("burn",0,29,80),t.animationController.setAnim("burn"),t.topPadding=3*u.default.TILE_SIZE,t.leftPadding=2*u.default.TILE_SIZE,t.rightPadding=2*u.default.TILE_SIZE,t.animationController.addFrameListener(t),t.willDmg=!1,t.damage=150,new Audio("assets/sounds/SunStrike.mp3").play(),t}n.default=f},{"../../../../module/context/core/gameObjects/animateGameObject":5,"../../../../module/context/core/scene/sceneEngine":10,"../../../../module/context/generals/global":12,"../../../handlers/imageHandler":49,"../../../handlers/perkHandler":51,"../../scenes/gameScene":44,"../textEffect":40}],40:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../handlers/timeCounter"),s=e("../../../module/context/core/scene/sceneEngine"),u=e("./gameText"),l=(a=u.default,o(h,a),h.prototype.draw=function(e,t){a.prototype.draw.call(this,e,t)},h.prototype.update=function(){this.y+=this.verticalMovSpeed,this.timeCounter.updateTimeCounter(s.default.getInstance().deltaTimeMili())&&this.destroy()},h);function h(e,t){var n=a.call(this,e,t)||this;return n.setZIndex(60),n.timeCounter=new r.default(500),n.verticalMovSpeed=-.5,n}n.default=l},{"../../../module/context/core/scene/sceneEngine":10,"../../handlers/timeCounter":54,"./gameText":31}],41:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../../module/context/core/gameObjects/imageGameObject"),s=(a=r.default,o(u,a),u.prototype.draw=function(e){null!=this.image&&e.drawImage(this.image,this.x,this.y,this.width,this.height)},u.prototype.update=function(){},u);function u(e,t){return a.call(this,e,t)||this}n.default=s},{"../../../../module/context/core/gameObjects/imageGameObject":7}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.init=function(){this.totalWeight=99999,this.parentX=-1,this.parentY=-1,this.isOpen=!1},o.prototype.setChar=function(e){this.char=e,this.point="#"==e||"S"==e?1:0,"#"===e||"H"===e?this.baseWeight=o.PATH:"S"===e?this.baseWeight=o.SPAWNER:" "===e?this.baseWeight=o.GRASS:"W"===e&&(this.baseWeight=o.WALL)},o.prototype.getChar=function(){return this.char},o.WALL=99999,o.PATH=1,o.SPAWNER=10,o.GRASS=9999,o);function o(e,t,n){this.init(),this.setChar(e),this.x=n,this.y=t}n.default=i},{}],43:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("../../../module/context/core/scene/scene"),s=e("../../../module/context/core/scene/sceneEngine"),u=e("../../../module/context/generals/global"),l=e("../../../module/context/generals/global"),h=(r=a.default,o(c,r),c.prototype.onCreated=function(){},c.prototype.onRender=function(e){e.drawImage(u.default.getInstance().assetManager.loadedImage.background,0,0,s.default.getInstance().canvas.width,s.default.getInstance().canvas.height)},c.prototype.onUpdate=function(){},c);function c(e){var t=r.call(this)||this;t.audio=new Audio("assets/sounds/lose.mp3"),t.audio.loop=!0,t.audio.play(),t.scores=[],t.scores.push(new d("RY",34)),t.scores.push(new d("KF",36)),t.scores.push(new d("KE",37)),t.scores.push(new d("JN",43)),t.scores.push(new d("KY",45)),t.scores.push(new d("GB",55)),t.scores.push(new d("DL",56)),t.scores.push(new d("LV",58)),t.scores.push(new d("HY",59)),t.scores.push(new d("KS",69)),t.scores.push(new d("AW",72)),t.scores.push(new d("CL",76)),t.scores.push(new d("GN",80)),t.scores.push(new d("AM",84)),t.scores.push(new d("RS",90)),t.scores.push(new d("AP",97)),t.scores.push(new d("RL",107)),t.scores.push(new d("LW",142)),t.scores.push(new d("DD",143)),t.scores.push(new d(l.default.getInstance().name.toUpperCase(),e)),t.scores.sort(function(e,t){return t.score-e.score});for(var n=document.getElementById("score-table"),i=0,o=t.scores;i<o.length;i++){var a=o[i];n.innerHTML+="\n                <tr>\n                    <td>"+a.name+"</td>\n                    <td>"+a.score+"</td>\n                </tr>\n            "}return n.parentElement.parentElement.parentElement.style.visibility="visible",t}n.default=h;var d=function(e,t){this.score=t+"",this.name=e}},{"../../../module/context/core/scene/scene":9,"../../../module/context/core/scene/sceneEngine":10,"../../../module/context/generals/global":12}],44:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../module/context/core/scene/scene"),s=e("../../handlers/mapCreator"),u=e("../model/tiles/gameTile"),l=e("../model/player"),h=e("../model/point"),c=e("../model/projectiles/projectile"),d=e("../model/enemies/enemy"),p=e("../model/gameMenu"),k=e("../../../module/context/generals/global"),L=e("../../handlers/calculator"),f=e("../model/cursors/cursor"),Z=e("../../../module/context/core/gameObjects/rectangleGameObject"),B=e("../../../module/context/core/scene/sceneEngine"),m=e("../../handlers/spawnHandler"),g=e("../../handlers/projectileHandler"),y=e("../../handlers/trueRandom"),v=e("../model/enemies/skeletonSpawner"),_=e("../model/skills/sunStrike"),x=e("../model/enemies/slimeSpawner"),w=e("../model/gameText"),b=e("../../handlers/timeCounter"),I=e("../model/enemies/boss"),S=e("./gameOverScene"),O=e("../../handlers/waveHandler"),E=e("../../handlers/perkHandler"),T=(a=r.default,o(R,a),R.prototype.onCreated=function(){this.trueRandom.randSeed();var e=L.default.calculateSize(R.TILE_SIZE,k.default.getInstance().width,k.default.getInstance().height),t=new s.default(e.y,e.x);this.maps=t.getMap(),this.cursor=new f.default({x:0,y:0,width:R.TILE_SIZE/2,height:R.TILE_SIZE/2}),this.cursor.setZIndex(1e5),this.addGameObject(this.cursor),B.default.getInstance().hideCursor();var n=[];this.gameMenu=new p.default({x:0,y:0,width:k.default.getInstance().width,height:this.maps[0].length*R.TILE_SIZE},this.audio),this.addGameObject(this.gameMenu);for(var i=0;i<this.maps.length;i++)for(var o=0;o<this.maps[i].length;o++){var a,r=void 0;"#"==this.maps[i][o].char?r=k.default.getInstance().assetManager.loadedImage.path:"W"==this.maps[i][o].char?(r=k.default.getInstance().assetManager.loadedImage.stone,this.obstacles.push(this.maps[i][o])):"S"==this.maps[i][o].char?(r=null,a=void 0,(a=0==this.trueRandom.randomNumber(0,2)?new x.default({x:i*R.TILE_SIZE,y:o*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE}):new v.default({x:i*R.TILE_SIZE,y:o*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE})).setZIndex(10),n.push(a),this.addGameObject(a)):"H"==this.maps[i][o].char?(r=k.default.getInstance().assetManager.loadedImage.path,this.player=new l.default({x:i*R.TILE_SIZE,y:o*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE},this.gameMenu),this.player.setTile(o,i),this.addGameObject(this.player)):(r=k.default.getInstance().assetManager.loadedImage.brick,this.obstacles.push(this.maps[i][o])),this.addGameObject(new u.default({x:i*R.TILE_SIZE,y:o*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE},r))}this.fpsText.setFontSize(R.TILE_SIZE),this.addGameObject(this.fpsText),R.spawnHandler=new m.default(n),R.spawnHandler.changeAllSpawner(),this.waveHandler=new O.default(this.enemies,this.player),this.waveHandler.notifiedEnemyDead(),E.default.getInstance().waveHandler=this.waveHandler,E.default.getInstance().gameMenu=this.gameMenu},R.prototype.onRender=function(e){E.default.getInstance().render(e)},R.prototype.onUpdate=function(){if(k.default.getInstance().debug&&(this.fpss.push(Math.round(B.default.getInstance().getFPSRealization())),this.fpsTimeCounter.updateTimeCounter(B.default.getInstance().deltaTimeMili()))){for(var e=this.fpss.length,t=0,n=0,i=this.fpss;n<i.length;n++)t+=i[n];this.fpsText.setText(Math.round(t/e)+""),this.fpss=[]}var o,a;this.waveHandler.update(),this.mouseHold?(o=this.player.getMiddlePoint(),a=L.default.calculateVelocity(o,this.player.mousePoint),null!=(c=this.projectileHandler.createProjectile(o.x,o.y,a.x,a.y,B.default.getInstance().deltaTime()))&&this.projectiles.push(c)):this.projectileHandler.addFireTime(B.default.getInstance().deltaTime());var r=R.spawnHandler.update(B.default.getInstance().deltaTime());r&&(this.enemies.push(r),this.addGameObject(r));for(var s=0,u=this.enemies;s<u.length;s++)u[s].pathFind(this.maps,Math.round(this.player.x/R.TILE_SIZE),Math.round(this.player.y/R.TILE_SIZE));0==this.nextVelX&&0==this.nextVelY||!this.isCanWalk(new Z.default({x:this.player.x+this.nextVelX+.5,y:this.player.y+this.nextVelY+.5,width:this.player.width-1,height:this.player.height-1}))||(this.player.velX=this.nextVelX,this.player.velY=this.nextVelY,this.nextVelX=0,this.nextVelY=0);for(var l=0,h=this.projectiles;l<h.length;l++)for(var c=h[l],d=0,p=this.enemies;d<p.length;d++){var f=p[d];c.isCollide(f)&&c.onHit(f)}for(var m=0,g=this.sunStrikes;m<g.length;m++){var y=g[m];if(y.willDmg)for(var v=0,_=this.enemies;v<_.length;v++){var x=_[v];y.isCollide(x)&&y.onHit(x)}}for(var w=0,b=this.enemies;w<b.length;w++){var I=b[w];this.player.isCollide(I)&&(this.player.onHitWithEnemy(),I.onHitWithPlayer())}for(var S=0,O=this.obstacles;S<O.length;S++){var E,T,j,P,M,C,H=O[S],A=new Z.default({x:H.x*R.TILE_SIZE,y:H.y*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE});this.player.isIntersectSoft(A)&&(E=Math.abs(this.player.x-(A.x+R.TILE_SIZE)),T=Math.abs(this.player.x+this.player.width-A.x),j=Math.min(E,T),P=Math.abs(this.player.y-(A.y+R.TILE_SIZE)),M=Math.abs(this.player.y+this.player.height-A.y),j<(C=Math.min(P,M))?this.player.x=j==E?this.player.x+j:this.player.x-j:C<j&&(this.player.y=C==P?this.player.y+C:this.player.y-C))}},R.prototype.mouseUp=function(e){var t;0==e.button?this.mouseHold=!1:2==e.button&&this.player.useSkill()&&(t=new _.default({x:e.x-R.TILE_SIZE/2,y:e.y-R.TILE_SIZE/2,width:R.TILE_SIZE,height:R.TILE_SIZE}),this.sunStrikes.push(t),this.addGameObject(t))},R.prototype.mouseDown=function(e){0==e.button&&(this.mouseHold=!0)},R.prototype.noticeDelete=function(e){var t;a.prototype.noticeDelete.call(this,e),e instanceof d.default?(e instanceof I.default&&(this.gameMenu.bgm.pause(),this.gameMenu.score*=2,B.default.getInstance().updateScene(new S.default(this.gameMenu.score))),this.enemies.splice(this.enemies.indexOf(e),1),e.hp<=0&&(t=1,E.default.getInstance().isActivate("scoreincrease2perenemy")&&(t=3),this.gameMenu.setScore(this.gameMenu.score+t),this.player.addExort(),this.waveHandler.notifiedEnemyDead())):e instanceof c.default?this.projectiles.splice(this.projectiles.indexOf(e),1):e instanceof _.default&&this.sunStrikes.splice(this.sunStrikes.indexOf(e),1)},R.prototype.mouseMove=function(e){this.player.setMousePoint(new h.default(e.x,e.y)),this.cursor.setMiddlePoint(new h.default(e.x,e.y))},R.prototype.keyDown=function(e){switch(e.key.toLowerCase()){case"e":this.player.velX=0,this.player.velY=0,this.nextVelX=0,this.nextVelY=0;break;case"w":this.isCanWalk(new Z.default({x:this.player.x,y:this.player.y-1,width:this.player.width,height:this.player.height}))?(this.player.velX=0,this.player.velY=-1,this.nextVelX=0,this.nextVelY=0):(this.nextVelX=0,this.nextVelY=-1);break;case"a":this.isCanWalk(new Z.default({x:this.player.x-1,y:this.player.y,width:this.player.width,height:this.player.height}))?(this.player.velX=-1,this.player.velY=0,this.nextVelX=0):this.nextVelX=-1,this.nextVelY=0;break;case"s":this.isCanWalk(new Z.default({x:this.player.x,y:this.player.y+1,width:this.player.width,height:this.player.height}))?(this.player.velX=0,this.player.velY=1,this.nextVelX=0,this.nextVelY=0):(this.nextVelX=0,this.nextVelY=1);break;case"d":this.isCanWalk(new Z.default({x:this.player.x+1,y:this.player.y,width:this.player.width,height:this.player.height}))?(this.player.velX=1,this.player.velY=0,this.nextVelX=0):this.nextVelX=1,this.nextVelY=0;break;default:isNaN(+e.key)||E.default.getInstance().inputPerk(+e.key)}},R.prototype.isCanWalk=function(e){for(var t=0,n=this.obstacles;t<n.length;t++){var i=n[t];if(new Z.default({x:i.x*R.TILE_SIZE,y:i.y*R.TILE_SIZE,width:R.TILE_SIZE,height:R.TILE_SIZE}).isIntersectSoft(e))return!1}return!0},R.TILE_SIZE=60,R);function R(){var e=a.call(this)||this;return e.nextVelX=0,e.nextVelY=0,e.mouseHold=!1,e.fpss=[],e.enemies=[],e.projectiles=[],e.obstacles=[],e.sunStrikes=[],e.projectileHandler=new g.default,e.trueRandom=new y.default,e.fpsText=new w.default(new h.default(k.default.getInstance().width/2,R.TILE_SIZE),""),e.fpsTimeCounter=new b.default(1e3),R.TILE_SIZE=k.default.getInstance().tile_size,e.audio=new Audio("assets/sounds/bgm.mp3"),e.audio.loop=!0,e.audio.play(),e}n.default=T},{"../../../module/context/core/gameObjects/rectangleGameObject":8,"../../../module/context/core/scene/scene":9,"../../../module/context/core/scene/sceneEngine":10,"../../../module/context/generals/global":12,"../../handlers/calculator":48,"../../handlers/mapCreator":50,"../../handlers/perkHandler":51,"../../handlers/projectileHandler":52,"../../handlers/spawnHandler":53,"../../handlers/timeCounter":54,"../../handlers/trueRandom":55,"../../handlers/waveHandler":56,"../model/cursors/cursor":14,"../model/enemies/boss":21,"../model/enemies/enemy":22,"../model/enemies/skeletonSpawner":26,"../model/enemies/slimeSpawner":28,"../model/gameMenu":30,"../model/gameText":31,"../model/player":35,"../model/point":36,"../model/projectiles/projectile":38,"../model/skills/sunStrike":39,"../model/tiles/gameTile":41,"./gameOverScene":43}],45:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../../module/context/core/scene/scene"),s=e("../../../module/context/generals/global"),u=e("../../../module/context/core/scene/sceneEngine"),l=e("./gameScene"),h=e("../../../module/context/generals/global"),c=(a=r.default,o(d,a),d.prototype.playAudio=function(){var t=this;this.audio.play().catch(function(e){setTimeout(function(){return t.playAudio()},1e3)})},d.prototype.onCreated=function(){var t=this;this.audio=new Audio("assets/sounds/intro.mp3"),this.audio.loop=!0,this.audio.play().catch(function(e){setTimeout(function(){return t.playAudio()},1e3)})},d.prototype.onRender=function(e){e.drawImage(h.default.getInstance().assetManager.loadedImage.background,0,0,u.default.getInstance().canvas.width,u.default.getInstance().canvas.height)},d.prototype.onUpdate=function(){},d);function d(){var i=a.call(this)||this,o=document.getElementById("form-data");return o.onsubmit=function(e){e.preventDefault();var t=o.elements.namedItem("name"),n=o.elements.namedItem("size");s.default.getInstance().tile_size=+n.value,s.default.getInstance().name=t.value,u.default.getInstance().updateScene(new l.default),o.parentElement.parentElement.parentElement.style.visibility="hidden",i.audio.pause()},i}n.default=c},{"../../../module/context/core/scene/scene":9,"../../../module/context/core/scene/sceneEngine":10,"../../../module/context/generals/global":12,"./gameScene":44}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},o);function o(){}n.default=i},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./timeCounter"),o=e("../../module/context/core/scene/sceneEngine"),a=e("../game/scenes/gameScene"),r=e("../game/model/enemies/behaviors/idleBehavior"),s=(u.prototype.update=function(){this.bossBehavior.onBehaviorUpdate(),this.timeCounter.updateTimeCounter(o.default.getInstance().deltaTimeMili())&&(this.bossBehavior.onBehaviorComplete(),this.boss.blink(),this.updateBehavior(this.bossBehavior.getNextBehavior()))},u.prototype.updateBehavior=function(e){this.timeCounter.setTargetTime(e.behaviorDuration),this.bossBehavior=e},u);function u(e){this.boss=e,a.default.spawnHandler.setWillSpawn(!1),this.bossBehavior=new r.default(this),this.timeCounter=new i.default(this.bossBehavior.behaviorDuration)}n.default=s},{"../../module/context/core/scene/sceneEngine":10,"../game/model/enemies/behaviors/idleBehavior":20,"../game/scenes/gameScene":44,"./timeCounter":54}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("../game/model/point"),i=(o.calculateSize=function(e,t,n){var i=new s.default;return i.x=Math.floor(t/e),i.y=Math.floor(n/e),i},o.calculateVelocity=function(e,t){new s.default;var n=t.x-e.x,i=t.y-e.y,o=Math.abs(n)+Math.abs(i),a=n/o*1,r=i/o*1;return new s.default(a,r)},o);function o(){}n.default=i},{"../game/model/point":36}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.splitSprite=function(e,t,n){for(var i=[],o=e.width/t,a=e.height/n,r=0;r<n;r++)for(var s=0;s<t;s++)i.push({x:o*s,y:a*r,width:o,height:a});return i};function i(){}n.default=i},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./trueRandom"),o=e("../game/model/tiles/tile"),a=e("../game/model/point"),r=(s.prototype.getMap=function(){return this.map},s.prototype.print=function(e){for(var t=0;t<this.HEIGHT;t++){for(var n="",i=0;i<this.WIDTH;i++)n+=e[t][i].getChar();console.log(t+" "+n)}},s.prototype.recursiveSearch=function(){var e=this.queue.shift();this.lastOpen=this.map[e.x][e.y],0<this.map[e.x-1][e.y].point&&(this.map[e.x-1][e.y].point=0,this.queue.push(new a.default(e.x-1,e.y))),0<this.map[e.x+1][e.y].point&&(this.map[e.x+1][e.y].point=0,this.queue.push(new a.default(e.x+1,e.y))),0<this.map[e.x][e.y-1].point&&(this.map[e.x][e.y-1].point=0,this.queue.push(new a.default(e.x,e.y-1))),0<this.map[e.x][e.y+1].point&&(this.map[e.x][e.y+1].point=0,this.queue.push(new a.default(e.x,e.y+1)))},s.prototype.createHomeAndSpawner=function(e){this.queue=[];for(var t=1;t<this.HEIGHT-1;t++)for(var n=1;n<this.WIDTH-1;n++)1!=t&&1!=n&&t!=this.HEIGHT-2&&n!=this.WIDTH-2||"#"!=e[t][n].char||(e[t][n]=new o.default("S",n,t),this.queue.push(new a.default(t,n)));for(;0<this.queue.length;)this.recursiveSearch();this.lastOpen.setChar("H")},s.prototype.reconstructWall=function(e){for(var t=0;t<this.HEIGHT;t++)for(var n=0;n<this.WIDTH;n++)0!=t&&0!=n&&t!=this.HEIGHT-1&&n!=this.WIDTH-1||(e[t][n]=new o.default("W",n,t))},s.prototype.init=function(){this.map=[];for(var e=0;e<this.HEIGHT;e++){this.map[e]=[];for(var t=0;t<this.WIDTH;t++)0==e||0==t||e==this.HEIGHT-1||t==this.WIDTH-1?this.map[e][t]=new o.default("#",t,e):this.map[e][t]=new o.default(" ",t,e)}},s.prototype.randomNumber=function(e,t){return Math.floor(this.trueRandom.random()*(t-e)+e)},s.prototype.drawBSP=function(e,t,n,i){for(var o=e;o<=n;o++)for(var a=t;a<=i;a++)o!=e&&a!=t&&o!=n&&a!=i||this.map[o][a].setChar("#")},s.prototype.BSP=function(e,t,n,i){var o=n-e+1,a=i-t+1;if(this.drawBSP(e,t,n,i),a<=o){if(o<this.MAX_HEIGHT)return;var r=this.randomNumber(e+this.MIN_HEIGHT,n-this.MIN_WIDTH);this.BSP(e,t,r,i),this.BSP(r,t,n,i)}else{if(a<this.MAX_WIDTH)return;r=this.randomNumber(t+this.MIN_HEIGHT,i-this.MIN_WIDTH),this.BSP(e,r,n,i),this.BSP(e,t,n,r)}},s.prototype.getMapFromBSP=function(){return this.init(),this.BSP(0,0,this.HEIGHT-1,this.WIDTH-1),this.map},s);function s(e,t){this.HEIGHT=20,this.WIDTH=20,this.MIN_HEIGHT=3,this.MIN_WIDTH=3,this.MAX_HEIGHT=9,this.MAX_WIDTH=9,this.WIDTH=e,this.HEIGHT=t,this.trueRandom=new i.default,this.trueRandom.randSeed(),this.init();var n=this.getMapFromBSP();this.reconstructWall(n),this.createHomeAndSpawner(n)}n.default=r},{"../game/model/point":36,"../game/model/tiles/tile":42,"./trueRandom":55}],51:[function(e,t,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../game/scenes/gameScene"),i=e("./trueRandom"),a=e("../../module/context/core/scene/sceneEngine"),r=e("../game/model/player"),u=e("./projectileHandler"),l=(h.getInstance=function(){return null===this.instance&&(this.instance=new h),this.instance},h.prototype.isActivate=function(e){return this.activatedPerk[e]},h.prototype.render=function(e){for(var t=4*s.default.TILE_SIZE,n=2*s.default.TILE_SIZE,i=a.default.getInstance().canvas.width/2-3*t/2,o=0;o<this.perksToChoose.length;o++)this.drawBox(e,i+o*t,n,o+1,this.perksToChoose[o])},h.prototype.drawBox=function(e,t,n,i,o){var a=2*s.default.TILE_SIZE,r=4*s.default.TILE_SIZE;e.fillStyle="white",e.fillRect(t,n,4*s.default.TILE_SIZE,a),e.strokeStyle="black",e.strokeRect(t,n,4*s.default.TILE_SIZE,a),e.fillStyle="black",e.font="bold "+s.default.TILE_SIZE/4+"pt arial",e.fillText(o.text,t+10,n+2*s.default.TILE_SIZE/3,r-20),e.fillText(i+"",t+r/2,n+a-s.default.TILE_SIZE/2,r)},h.prototype.addPerkToChoose=function(){for(var e=o(this.perks),t=0;t<3;t++){var n=this.trueRandom.randomNumber(0,e.length),i=e[n];e.splice(n,1),this.perksToChoose.push(i)}},h.prototype.inputPerk=function(e){1<=e&&e<=this.perksToChoose.length&&(this.perksToChoose[e-1].active(),this.waveHandler.choosePerk())},h.instance=null,h);function h(){var e=this;this.perks=[],this.activatedPerk={},this.perks.push(new c("dmg+10","Attack Damage + 10")),this.perks.push(new c("dmg+2foreveryexort","Attack Damage + 2 for every Exort")),this.perks.push(new c("movementspeed+50%","Movement Speed + 50%",function(){r.default.movementSpeed=3*r.default.movementSpeed/2})),this.perks.push(new c("heart+2","Life + 2",function(){e.gameMenu.increaseHeart(),e.gameMenu.increaseHeart()})),this.perks.push(new c("projectilespeed+100%","Attack Projectile Speed + 100%")),this.perks.push(new c("attackspeed+30%","Delay between each attack reduced 30%",function(){u.default.fireRate=70*u.default.fireRate/100})),this.perks.push(new c("sunstrikedmg+50","Sun Strike Damage + 50")),this.perks.push(new c("sunstrikecost-1","Sun Strike cost 1 less Exort")),this.perks.push(new c("scoreincrease2perenemy","Score Per Enemy + 2")),this.perksToChoose=[],this.trueRandom=new i.default,this.trueRandom.randSeed()}n.default=l;var c=(d.prototype.active=function(){this.onChooseFunction&&this.onChooseFunction(),l.getInstance().activatedPerk[this.name]=this,l.getInstance().perks.splice(l.getInstance().perks.indexOf(this),1),l.getInstance().perksToChoose=[]},d);function d(e,t,n){void 0===n&&(n=null),this.isActive=!1,this.name=e,this.onChooseFunction=n,this.text=t}},{"../../module/context/core/scene/sceneEngine":10,"../game/model/player":35,"../game/scenes/gameScene":44,"./projectileHandler":52,"./trueRandom":55}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("../game/model/projectiles/arrow"),u=e("../game/model/point"),l=e("../../module/context/core/scene/sceneEngine"),h=e("../game/scenes/gameScene"),c=e("./perkHandler"),d=e("../game/model/player"),i=(a.prototype.createProjectile=function(e,t,n,i,o){if(this.fireTime+=o,this.fireTime>=a.fireRate)return this.fireTime-=a.fireRate,this.spawn(e,t,n,i)},a.prototype.addFireTime=function(e){this.fireTime<a.fireRate&&(this.fireTime+=e)},a.prototype.spawn=function(e,t,n,i){var o=2*h.default.TILE_SIZE/5,a=new s.default({x:e,y:t,width:o,height:o},new u.default(n,i)),r=5;return c.default.getInstance().isActivate("projectilespeed+100%")&&(r*=2),a.setSpeed(r),a.setZIndex(20),e+=40*n,t+=40*i,a.setMiddlePoint(new u.default(e,t)),c.default.getInstance().isActivate("dmg+10")&&(a.damage+=10),c.default.getInstance().isActivate("dmg+2foreveryexort")&&(a.damage+=2*d.default.exort),l.default.getInstance().injectGameObject(a),a},a);function a(){this.fireTime=0,a.fireRate=.5}n.default=i},{"../../module/context/core/scene/sceneEngine":10,"../game/model/player":35,"../game/model/point":36,"../game/model/projectiles/arrow":37,"../game/scenes/gameScene":44,"./perkHandler":51}],53:[function(e,t,n){"use strict";var a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./trueRandom"),o=e("../game/model/enemies/skeletonSpawner"),r=e("../../module/context/core/scene/sceneEngine"),s=e("../game/model/enemies/slimeSpawner"),u=(l.prototype.setWillSpawn=function(e){this.willSpawn=e,this.currentValue=0},l.prototype.update=function(e){return this.currentValue+=e,this.currentValue>=this.valueToSpawn?(this.currentValue%=this.valueToSpawn,this.spawn()):null},l.prototype.spawn=function(){if(!this.willSpawn)return null;var e=Math.floor(this.trueRandom.randomNumber(0,this.spawners.length));return this.spawners[e].spawn()},l.prototype.getSpawnerByTypeNumber=function(e,t){return 0==e?new s.default(t):new o.default(t)},l.prototype.changeSpawner=function(e,t){var n=e,i=this.getSpawnerByTypeNumber(t,n.getHitBox());i.setZIndex(n.zIndex),r.default.getInstance().injectGameObject(i),n.destroy(),this.spawners.splice(this.spawners.indexOf(n),1),this.spawners.push(i)},l.prototype.changeAllSpawner=function(e){void 0===e&&(e=-1);for(var t=0,n=a(this.spawners);t<n.length;t++){var i=n[t],o=this.trueRandom.randomNumber(0,2);-1==e?this.changeSpawner(i,o):this.changeSpawner(i,e)}},l);function l(e){this.willSpawn=!0,this.spawners=e,this.currentValue=0,this.valueToSpawn=1,this.trueRandom=new i.default,this.trueRandom.randSeed()}n.default=u},{"../../module/context/core/scene/sceneEngine":10,"../game/model/enemies/skeletonSpawner":26,"../game/model/enemies/slimeSpawner":28,"./trueRandom":55}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.resetCounter=function(){this.counter=0},o.prototype.updateTimeByCurrentTimeMili=function(e){if(-1!=this.previousTime){var t=e-this.previousTime;if(this.counter+=t,this.counter>=this.targetTime)return this.counter%=this.targetTime,this.previousTime=e,!0}return this.previousTime=e,!1},o.prototype.updateTimeCounter=function(e){return this.counter+=e,this.counter>=this.targetTime&&(this.counter%=this.targetTime,!0)},o.prototype.setPreviousTime=function(e){this.previousTime=e},o.prototype.setTargetTime=function(e){this.targetTime=e},o);function o(e){this.targetTime=e,this.counter=0,this.previousTime=-1}n.default=i},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.randSeed=function(){this.seed=Math.floor(1e4*Math.random())},o.prototype.random=function(){var e=1e4*Math.sin(this.seed++);return e-Math.floor(e)},o.prototype.randomNumber=function(e,t){return Math.floor(this.random()*(t-e)+e)},o);function o(e){void 0===e&&(e=1),this.seed=e}n.default=i},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../game/scenes/gameScene"),o=e("./timeCounter"),a=e("../../module/context/core/scene/sceneEngine"),r=e("../game/model/enemies/boss"),s=e("./perkHandler"),u=(l.prototype.update=function(){this.waveNum<=this.bossWave&&this.waveTimeCounter.updateTimeCounter(a.default.getInstance().deltaTimeMili())&&(this.waveOnGoing=!1,i.default.spawnHandler.setWillSpawn(!1))},l.prototype.startWave=function(){var e;this.waveNum==this.bossWave?((e=new r.default({x:100,y:100,width:2*i.default.TILE_SIZE,height:2*i.default.TILE_SIZE},this.player)).blink(),a.default.getInstance().injectGameObject(e),this.enemies.push(e),this.waveNum++):this.waveNum<this.bossWave&&(i.default.spawnHandler.changeAllSpawner(this.waveNum),i.default.spawnHandler.setWillSpawn(!0),this.waveTimeCounter.resetCounter(),this.waveNum++,this.waveOnGoing=!0)},l.prototype.notifiedEnemyDead=function(){0==this.enemies.length&&0==this.waveOnGoing&&s.default.getInstance().addPerkToChoose()},l.prototype.choosePerk=function(){this.startWave()},l);function l(e,t){this.timeForEachWave=7e3,this.enemies=e,this.waveTimeCounter=new o.default(this.timeForEachWave),this.waveNum=0,this.bossWave=2,this.player=t,this.waveOnGoing=!1,i.default.spawnHandler.setWillSpawn(!1)}n.default=u},{"../../module/context/core/scene/sceneEngine":10,"../game/model/enemies/boss":21,"../game/scenes/gameScene":44,"./perkHandler":51,"./timeCounter":54}]},{},[1]);