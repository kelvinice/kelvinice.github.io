!function r(a,s,h){function l(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return l(a[e][1][t]||t)},o,o.exports,r,a,s,h)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<h.length;t++)l(h[t]);return l}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./module/context/core/scene/sceneEngine"),o=t("./script/game/scenes/dummy-scene"),r=t("./script/game/scenes/loadingScene"),a=t("./module/context/generals/global");window.onload=function(){!function(){var t=document.getElementsByTagName("canvas")[0],e=i.default.getInstance();e.initCanvas(t),e.updateScene(new r.default),e.start();var n=a.default.getInstance().assetManager;n.addPath("eye","eye.png"),n.addPath("eye-red","eye-red.png"),n.addPath("pillar","pillar.png"),n.addPath("groundtile","groundtile.png"),n.addPath("skeleton","skeleton.png"),n.addPath("slime","slime.png"),n.addPath("hit","hit.png"),n.addPath("player-spy","player1.png"),n.addPath("player-esper","player2.png"),n.addPath("player-killer","player3.png"),n.addPath("door","downdoor.png"),n.addPath("frame","frame.png"),n.addPath("energy","energy.png"),n.addPath("bow-arrow","bow-arrow.png"),n.addPath("arrow","arrow.png"),n.addPath("move","skills/move.png"),n.addPath("shoot","skills/shoot.png"),n.addPath("spy","skills/spy.png"),n.addPath("teleport","skills/teleport.png"),n.addPath("scratch","skills/scratch.png"),n.addPath("fireball","fireball.png"),n.addPath("pinky","pinky.png"),n.addPath("snowflake","snowflake.png"),n.addPath("light","light.png"),n.addPath("normal","cursors/normal.cur"),n.addPath("unavailable","cursors/unavailable.cur"),n.addPath("sword","cursors/sword.cur"),n.addPath("busy","cursors/busy.cur"),n.addAssetDoneListener(function(){e.updateScene(new o.default)}),n.loadAsset()}()}},{"./module/context/core/scene/sceneEngine":11,"./module/context/generals/global":13,"./script/game/scenes/dummy-scene":40,"./script/game/scenes/loadingScene":42}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.addActivity=function(t){this._activities.push(t)},o.prototype.then=function(t){return this._finishFunction=t,this},o.prototype.updateActivity=function(t){for(var e=[],n=0,i=this._activities;n<i.length;n++){var o=i[n];o.updateActivity(t)&&e.push(o)}for(var r=0,a=e;r<a.length;r++){var s=a[r];this._activities.splice(this._activities.indexOf(s),1)}return 0===this._activities.length&&(this._finishFunction&&this._finishFunction(),!0)},o);function o(){this._activities=[]}n.default=i},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./animation"),i=(r.prototype.addAnimation=function(t,e,n,i){this.animations.push(new o.default(t,e,n,i))},r.prototype.setAnim=function(t){if(null==this.activeAnimation||this.activeAnimation.name!==t){for(var e=0,n=this.animations;e<n.length;e++){var i=n[e];if(i.name===t)return this.activeAnimation=i,this.index=i.begin,void(this.counter=0)}console.log("Animation name not found")}},r.prototype.updateAnimation=function(t){void 0===t&&(t=1e3/60),null!=this.activeAnimation&&(this.counter+=t,this.counter>=this.activeAnimation.delay&&(this.counter%=this.activeAnimation.delay,null!=this.frameListener&&this.frameListener.onFrameChanged(this.index),this.index++,this.index>this.activeAnimation.end?this.index=this.activeAnimation.begin:this.index<this.activeAnimation.begin&&(this.index=this.activeAnimation.end)))},r.prototype.addFrameListener=function(t){this.frameListener=t},r);function r(){this.animations=[],this.counter=0}n.default=i},{"./animation":4}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"begin",{get:function(){return this._begin},set:function(t){this._begin=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t},enumerable:!0,configurable:!0}),o);function o(t,e,n,i){this._name=t,this._begin=e,this._end=n,this._delay=i}n.default=i},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.setMaximize=function(){this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight},o.prototype.forceFullScreen=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},o.prototype.resizeCanvas=function(){this.setMaximize(),null!=this.reactiveListener&&this.reactiveListener(this.getWidthCanvas(),this.getHeightCanvas())},o.prototype.makeWindowReactive=function(){var t=this;window.addEventListener("resize",function(){return t.resizeCanvas()},!1)},o.prototype.setReactiveListener=function(t){this.reactiveListener=t},o.prototype.getContext2d=function(){return this.canvas.getContext("2d")},o.prototype.getWidthCanvas=function(){return this.canvas.width},o.prototype.getHeightCanvas=function(){return this.canvas.height},o);function o(t){this.canvas=t,this.reactiveListener=null}n.default=i},{}],6:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./image-game-object"),s=t("../animations/animation-controller"),h=(r=a.default,o(l,r),l.prototype.drawAnimationOnXY=function(t,e,n){var i=this.rectangles[this.animationController.index];t.drawImage(this.image,i.x,i.y,i.width,i.height,e-this.leftPadding,n-this.topPadding,this.width+this.leftPadding+this.rightPadding,this.height+this.topPadding+this.bottomPadding)},l.prototype.draw=function(t,e){this.drawAnimationOnXY(t,this.x,this.y),-1!=this.previousTime.valueOf()&&this.animationController.updateAnimation(e.valueOf()-this.previousTime.valueOf()),this.previousTime=Number(e)},l.prototype.update=function(){},l);function l(t,e){var n=r.call(this,t,e)||this;return n.animationController=new s.default,n.previousTime=Number(-1),n}n.default=h},{"../animations/animation-controller":3,"./image-game-object":8}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../generals/point"),i=t("../../generals/guid"),o=t("../scene/sceneEngine"),a=t("../../generals/line-segment"),s=(Object.defineProperty(h.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isOverlay",{get:function(){return this._isOverlay},set:function(t){this._isOverlay=t},enumerable:!0,configurable:!0}),h.prototype.setX=function(t){this.x=t},h.prototype.setY=function(t){this.y=t},h.prototype.setWidth=function(t){this.width=t},h.prototype.setHeight=function(t){this.height=t},Object.defineProperty(h.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),h.prototype.setVisible=function(t){this._isVisible=t},h.prototype.setZIndex=function(t){return this.zIndex=t,this},h.prototype.isIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height&&this.y+this.height>=t.y},h.prototype.isIntersectSoft=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},h.prototype.isHorizontalLinearIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height/2&&this.y+this.height>=t.y+t.height/2},h.prototype.isIn=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},h.prototype.getMiddlePoint=function(){return this.middlePoint.x=this.x+this.width/2,this.middlePoint.y=this.y+this.height/2,this.middlePoint},h.prototype.setMiddlePoint=function(t){return this.x=t.x-this.width/2,this.y=t.y-this.height/2,this},h.prototype.fillHitBox=function(t,e){t.fillStyle=e;var n=this.getHitBox();t.fillRect(n.x,n.y,n.width,n.height)},h.prototype.destroy=function(){this._isDestroyed=!0,o.default.getInstance().injectDestroyedGameObject(this)},h.prototype.restore=function(){this._isDestroyed=!1},Object.defineProperty(h.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),h.prototype.setDestroyed=function(t){this._isDestroyed=t},h.prototype.getHitBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},h.prototype.isCollide=function(t){if(this===t)return!1;var e=this.getHitBox(),n=t.getHitBox();return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y},h.prototype.isIntersectLine=function(t){for(var e=0,n=this.getSegments();e<n.length;e++)if(n[e].doIntersect(t.a,t.b))return!0;return!1},h.prototype.getSegments=function(){var t=[],e=new r.default(this.x,this.y),n=new r.default(this.x+this.width,this.y),i=new r.default(this.x,this.y+this.height),o=new r.default(this.x+this.width,this.y+this.height);return t.push(new a.default(e,i)),t.push(new a.default(i,o)),t.push(new a.default(o,n)),t.push(new a.default(n,e)),t},h);function h(t){this.zIndex=0,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this._isDestroyed=!1,this._id=i.default.newGuid(),this._isVisible=!0,this.middlePoint=new r.default(this.x+this.width/2,this.y+this.height/2),this.isOverlay=!1}n.default=s},{"../../generals/guid":14,"../../generals/line-segment":15,"../../generals/point":16,"../scene/sceneEngine":11}],8:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./game-object"),s=(r=a.default,o(h,r),Object.defineProperty(h.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t},enumerable:!0,configurable:!0}),h.prototype.update=function(){},h.prototype.draw=function(t,e){t.drawImage(this._image,this.x-this.leftPadding,this.y-this.topPadding,this.width+this.leftPadding+this.rightPadding,this.height+this.topPadding+this.bottomPadding)},h);function h(t,e){void 0===e&&(e=null);var n=r.call(this,t)||this;return n._image=e,n.horizontalPadding=0,n.topPadding=0,n.bottomPadding=0,n.leftPadding=0,n.rightPadding=0,n}n.default=s},{"./game-object":7}],9:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./game-object"),s=(r=a.default,o(h,r),h.prototype.draw=function(t,e){},h.prototype.update=function(){},h);function h(t){return r.call(this,t)||this}n.default=s},{"./game-object":7}],10:[function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=t("./sceneEngine"),r=(a.prototype.getGameObject=function(){return this.gameObjects},Object.defineProperty(a.prototype,"activities",{get:function(){return this._activities},enumerable:!0,configurable:!0}),a.prototype.addGameObject=function(t){this.gameObjects.push(t),this.reorderZIndex()},a.prototype.reorderZIndex=function(){this.gameObjects.sort(function(t,e){return t.zIndex-e.zIndex})},a.prototype.mouseContextMenu=function(t){},a.prototype.mouseClick=function(t){},a.prototype.mouseMove=function(t){},a.prototype.mouseDown=function(t){},a.prototype.mouseUp=function(t){},a.prototype.keyDown=function(t){},a.prototype.keyUp=function(t){},a.prototype.processRender=function(e,n){i(this.gameObjects).forEach(function(t){t.isVisible&&t.draw(e,n)}),this.onRender(e)},a.prototype.processUpdate=function(){i(this.gameObjects).forEach(function(t){t.update()}),this.updateActivity(o.default.getInstance().deltaTimeMilli()),this.onUpdate(),this.deleteTrash()},a.prototype.deleteTrash=function(){for(var t=i(this.toDeletes);0<t.length;){var e=t.pop();0<=this.gameObjects.indexOf(e)?(this.noticeDelete(e),this.gameObjects.splice(this.gameObjects.indexOf(e),1)):console.log("Object Not Found!"),this.toDeletes.splice(this.toDeletes.indexOf(e),1)}},a.prototype.noticeDelete=function(t){},a.prototype.destroyGameObject=function(t){t.setDestroyed(!0),this.toDeletes.push(t)},a.prototype.updateActivity=function(t){for(var e=[],n=0,i=this._activities;n<i.length;n++){var o=i[n];o.updateActivity(t)&&e.push(o)}for(var r=0,a=e;r<a.length;r++){var s=a[r];this._activities.splice(this._activities.indexOf(s),1)}return 0===this._activities.length},a.prototype.addActivity=function(t){this._activities.push(t)},a);function a(){this.gameObjects=[],this.toDeletes=[],this.lapseTime=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this._activities=[]}n.default=r},{"./sceneEngine":11}],11:[function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,a,s,h){return new(s=s||Promise)(function(n,e){function i(t){try{r(h.next(t))}catch(t){e(t)}}function o(t){try{r(h.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,o)}r((h=h.apply(t,a||[])).next())})},r=this&&this.__generator||function(n,i){var o,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,r=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],r=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../generals/global"),a=t("../canvas/canvas-controller"),s=t("../../../../script/handlers/timeCounter"),h=(l.prototype.getFPSRealization=function(){return this.fpsRealization},l.prototype.deltaTime=function(){return(this.getTime()-this.last_time)/1e3},l.prototype.deltaTimeMilli=function(){return this.getTime()-this.last_time},l.prototype.getTime=function(){return(new Date).getTime()},l.prototype.initCanvas=function(t){var e=this;this.readyStatus=!1,this.canvas=t,this.canvasController=new a.default(this.canvas),this.ctx=this.canvasController.getContext2d(),this.currentScene=null,this.canvasController.setMaximize(),o.default.getInstance().width=this.canvasController.getWidthCanvas(),o.default.getInstance().height=this.canvasController.getHeightCanvas(),this.renderCanvas=document.createElement("canvas"),this.renderCanvas.width=this.canvas.width,this.renderCanvas.height=this.canvas.height,this.ctxR=this.renderCanvas.getContext("2d"),t.addEventListener("click",function(t){return e.mouseClick(t)}),t.addEventListener("mousemove",function(t){return e.mouseMove(t)}),window.addEventListener("keydown",function(t){return e.keyDown(t)}),window.addEventListener("keyup",function(t){return e.keyUp(t)}),this.renderTimeCounter=new s.default(this._frameTime),this.clearTimeCounter=new s.default(2*this._frameTime)},Object.defineProperty(l.prototype,"fps",{get:function(){return this._fps},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"frameTime",{get:function(){return this._frameTime},enumerable:!0,configurable:!0}),l.prototype.mouseContextMenu=function(t){t.preventDefault(),null!=this.currentScene&&this.currentScene.mouseContextMenu(t)},l.prototype.keyDown=function(t){null!=this.currentScene&&this.currentScene.keyDown(t)},l.prototype.keyUp=function(t){null!=this.currentScene&&this.currentScene.keyUp(t)},l.prototype.mouseDown=function(t){null!=this.currentScene&&this.currentScene.mouseDown(t)},l.prototype.mouseUp=function(t){null!=this.currentScene&&this.currentScene.mouseUp(t)},l.prototype.mouseMove=function(t){null!=this.currentScene&&this.currentScene.mouseMove(t)},l.prototype.mouseClick=function(t){null!=this.currentScene&&this.currentScene.mouseClick(t)},l.prototype.getCanvasController=function(){return this.canvasController},l.getInstance=function(){return null==this.instance&&(this.instance=new l),this.instance},l.prototype.start=function(){var e=this;this.canvasController.setMaximize(),this.recurrentUpdate(),requestAnimationFrame(function(t){return e.render(t)})},l.prototype.render=function(t){var e=this;1==this.readyStatus&&(o.default.getInstance().fpsCap&&!this.willRender||(o.default.getInstance().clearCap&&!this.clearTimeCounter.updateTimeByCurrentTimeMili(t.valueOf())||(this.ctx.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height),this.ctxR.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height)),this.currentScene.processRender(this.ctxR,t),this.ctx.drawImage(this.renderCanvas,0,0,o.default.getInstance().width,o.default.getInstance().height),this.willRender=!1)),requestAnimationFrame(function(t){return e.render(t)})},l.prototype.recurrentUpdate=function(){return i(this,void 0,void 0,function(){var n,i,o;return r(this,function(t){switch(t.label){case 0:this.previousTime=(new Date).getTime(),t.label=1;case 1:return this.update(),n=(new Date).getTime(),i=n-this.previousTime,0<(o=this._frameTime-i)?[4,(e=o,new Promise(function(t){return setTimeout(t,e)}))]:[3,3];case 2:return t.sent(),this.fpsRealization=1e3/(i+o),[3,4];case 3:this.fpsRealization=1e3/i,t.label=4;case 4:return this.previousTime=n,this.willRender=!0,[3,1];case 5:return[2]}var e})})},l.prototype.update=function(){this.currentScene.processUpdate(),this.last_time=this.getTime()},l.prototype.makeWindowReactive=function(){this.canvasController.setReactiveListener(this.handleWindowListener),this.canvasController.makeWindowReactive()},l.prototype.handleWindowListener=function(t,e){o.default.getInstance().width=t,o.default.getInstance().height=e,window.location.reload()},l.prototype.updateScene=function(t){this.readyStatus=!1,this.currentScene=t,this.currentScene.onCreated(),this.readyStatus=!0},l.prototype.injectGameObject=function(t){null!=this.currentScene&&this.currentScene.addGameObject(t)},l.prototype.reorderZIndex=function(){null!=this.currentScene&&this.currentScene.reorderZIndex()},l.prototype.hideCursor=function(){this.canvas.style.cursor="none"},l.prototype.showCursor=function(){this.canvas.style.cursor="default"},l.prototype.injectDestroyedGameObject=function(t){this.currentScene.destroyGameObject(t)},l.instance=null,l);function l(){this.fpsRealization=0,this.previousTime=-1,this._fps=65,this._frameTime=1e3/this._fps,this.last_time=this.getTime(),this.willRender=!0}n.default=h},{"../../../../script/handlers/timeCounter":54,"../../generals/global":13,"../canvas/canvas-controller":5}],12:[function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=(Object.defineProperty(r.prototype,"spaths",{get:function(){return this._spaths},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ipaths",{get:function(){return this._ipaths},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"assetDone",{get:function(){return this._assetDone},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"doneCount",{get:function(){return this._doneCount},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadedImage",{get:function(){return this._loadedImage},enumerable:!0,configurable:!0}),r.prototype.addPath=function(t,e){this._ipaths.push({name:t,path:e})},r.prototype.addSoundPath=function(t,e){this._spaths.push({name:t,path:e})},r.prototype.addAssetDoneListener=function(t){this._assetDone=t},r.prototype.loadAsset=function(){var o=this;i(this._ipaths).forEach(function(t){var e=t.name,n=t.path,i=new Image;i.src="./assets/images/"+n,i.onload=function(){o._loadedImage[e]=i,o._doneCount++,o.check()}}),i(this._spaths).forEach(function(t){var e=t.name,n=t.path,i=o.loadSound(n);i.onload=function(){o._loadedSound[e]=i,o._doneCount++,o.check()},i.load()}),this.check()},r.prototype.check=function(){this._doneCount==this._ipaths.length+this._spaths.length&&this._assetDone()},r.prototype.loadImage=function(t){var e=new Image;return e.src="./assets/images/"+t,e},r.prototype.loadSound=function(t){return new Audio("./assets/sounds/"+t)},r.prototype.getLoadedImage=function(t){return this.loadedImage[t]},r);function r(){this._ipaths=[],this._spaths=[],this._assetDone=null,this._images=[],this._doneCount=0,this._loadedImage={}}n.default=o},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./asset"),o=(r.getInstance=function(){return null===this.instance&&(this.instance=new r),this.instance},r.instance=null,r);function r(){this.flipNum=0,this.width=0,this.height=0,this.debug=!1,this.assetManager=new i.default,this.name="",this.tile_size=50,this.fpsCap=!0,this.clearCap=!1,this.maxTileCount=5,this.flipNum=0}n.default=o},{"./asset":12}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},o);function o(){}n.default=i},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.onSegment=function(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)},o.prototype.orientation=function(t,e,n){var i=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);return 0==i?0:0<i?1:2},o.prototype.doIntersect=function(t,e){var n=this.a,i=this.b,o=this.orientation(n,i,t),r=this.orientation(n,i,e),a=this.orientation(t,e,n),s=this.orientation(t,e,i);return o!=r&&a!=s||!(0!=o||!this.onSegment(n,t,i))||!(0!=r||!this.onSegment(n,e,i))||!(0!=a||!this.onSegment(t,n,e))||!(0!=s||!this.onSegment(t,i,e))},o.prototype.isIn=function(t){return t.isIn(this.a.x,this.a.y)||t.isIn(this.b.x,this.b.y)},o.prototype.toRectangle=function(){var t=Math.min(this.a.x,this.b.x),e=Math.min(this.a.y,this.b.y);return{x:t,y:e,width:Math.max(this.a.x,this.b.x)-t,height:Math.max(this.a.y,this.b.y)-e}},o);function o(t,e){this.a=t,this.b=e}n.default=i},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.angle=n}n.default=i},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./rectangle"),o=(r.prototype.insertAll=function(t){var e=this;t.forEach(function(t){return e.root.insert(t,e.maxNodeCapacity,e.maxTreeDepth)})},r.prototype.insert=function(t){this.root.insert(t,this.maxNodeCapacity,this.maxTreeDepth)},r.prototype.clear=function(){this.root.clear()},r.prototype.retrieve=function(t){return this.root.retrieve(t)},r);function r(t,e,n){void 0===e&&(e=1),void 0===n&&(n=Number.POSITIVE_INFINITY),this.maxNodeCapacity=e,this.maxTreeDepth=n,this.root=new a(0,t)}n.default=o;var a=(s.prototype.clear=function(){this.children.forEach(function(t){return t.clear()}),this.gameObjects=[],this.children=[]},s.prototype.subdivide=function(){var t=this.bounds,e=this.depth;this.children[0]=new s(e+1,new i.default(t.middleX,t.y0,t.x1,t.middleY)),this.children[1]=new s(e+1,new i.default(t.x0,t.y0,t.middleX,t.middleY)),this.children[2]=new s(e+1,new i.default(t.x0,t.middleY,t.middleX,t.y1)),this.children[3]=new s(e+1,new i.default(t.middleX,t.middleY,t.x1,t.y1))},s.prototype.getChildNode=function(e){return this.children.find(function(t){return t.bounds.isGameObjectWithinBounds(e)})},s.prototype.insert=function(t,n,i){var o=this,e=this.getChildNode(t);if(e)return e.insert(t,n,i);this.gameObjects.push(t),this.gameObjects.length>=n&&this.depth<i&&(0===this.children.length&&this.subdivide(),this.gameObjects=this.gameObjects.filter(function(t){var e=o.getChildNode(t);return e&&e.insert(t,n,i),!e}))},s.prototype.retrieve=function(t,e){void 0===e&&(e=[]);var n=this.getChildNode(t);return n&&e.push.apply(e,n.retrieve(t)),e.push.apply(e,this.gameObjects),e},s);function s(t,e,n){void 0===n&&(n=[]),this.children=[],this.depth=t,this.bounds=e,this.gameObjects=n}},{"./rectangle":18}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"width",{get:function(){return this.x1-this.x0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.y1-this.y0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"middleX",{get:function(){return this.x0+this.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"middleY",{get:function(){return this.y0+this.height/2},enumerable:!0,configurable:!0}),o.prototype.isGameObjectWithinBounds=function(t){var e=this.x0,n=this.y0,i=this.x1,o=this.y1;return e<=t.x&&i>=t.x+t.width&&n<=t.y&&o>=t.y+t.height},o);function o(t,e,n,i){this.x0=t,this.y0=e,this.x1=n,this.y1=i}n.default=i},{}],19:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/gameObjects/animate-game-object"),p=t("../scenes/dummy-scene"),s=(r=a.default,o(h,r),h.prototype.isWalkAble=function(t){return"W"!==t.char},h.prototype.pathFind=function(t,e,n){for(var i=[],o=1;o<t.length-1;o++)for(var r=1;r<t[o].length-1;r++)t[o][r].init();var a=t[e][n];a.totalWeight=0,a.isOpen=!0;var s=p.default.tileSize,h=t[Math.floor(this.x/s)][Math.floor(this.y/s)];for(h.totalWeight=999999,i.push(a);0<i.length&&-1==h.parentX;){var l,u=(i=i.sort(function(t,e){return t.totalWeight-e.totalWeight})).shift();void 0!==u&&(!t[u.xMap][u.yMap+1].isOpen&&this.isWalkAble(t[u.xMap][u.yMap+1])&&(l=u.totalWeight+t[u.xMap][u.yMap+1].baseWeight)<=t[u.xMap][u.yMap+1].totalWeight&&(t[u.xMap][u.yMap+1].totalWeight=l,t[u.xMap][u.yMap+1].parentX=u.xMap,t[u.xMap][u.yMap+1].parentY=u.yMap,i.push(t[u.xMap][u.yMap+1]),t[u.xMap][u.yMap+1].isOpen=!0),!t[u.xMap-1][u.yMap].isOpen&&this.isWalkAble(t[u.xMap-1][u.yMap])&&(l=u.totalWeight+t[u.xMap-1][u.yMap].baseWeight)<=t[u.xMap-1][u.yMap].totalWeight&&(t[u.xMap-1][u.yMap].totalWeight=l,t[u.xMap-1][u.yMap].parentX=u.xMap,t[u.xMap-1][u.yMap].parentY=u.yMap,i.push(t[u.xMap-1][u.yMap]),t[u.xMap-1][u.yMap].isOpen=!0),!t[u.xMap+1][u.yMap].isOpen&&this.isWalkAble(t[u.xMap+1][u.yMap])&&(l=u.totalWeight+t[u.xMap+1][u.yMap].baseWeight)<=t[u.xMap+1][u.yMap].totalWeight&&(t[u.xMap+1][u.yMap].totalWeight=l,t[u.xMap+1][u.yMap].parentX=u.xMap,t[u.xMap+1][u.yMap].parentY=u.yMap,i.push(t[u.xMap+1][u.yMap]),t[u.xMap+1][u.yMap].isOpen=!0),!t[u.xMap][u.yMap-1].isOpen&&this.isWalkAble(t[u.xMap][u.yMap-1])&&(l=u.totalWeight+t[u.xMap][u.yMap-1].baseWeight)<=t[u.xMap][u.yMap-1].totalWeight&&(t[u.xMap][u.yMap-1].totalWeight=l,t[u.xMap][u.yMap-1].parentX=u.xMap,t[u.xMap][u.yMap-1].parentY=u.yMap,i.push(t[u.xMap][u.yMap-1]),t[u.xMap][u.yMap-1].isOpen=!0))}for(var c=h,d=[];null!=c&&-1!=c.parentY;)d.push(c),(c=t[c.parentX][c.parentY]).path=!0;return 0<d.length&&d.push(a),d},h.prototype.drawPortrait=function(t,e,n,i,o){},h.prototype.onUsingMove=function(){},h.prototype.onUsingSkill1=function(){},h);function h(){return null!==r&&r.apply(this,arguments)||this}n.default=s},{"../../../module/context/core/gameObjects/animate-game-object":6,"../scenes/dummy-scene":40}],20:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./enemy"),s=t("../../../handlers/imageHandler"),h=(r=a.default,o(l,r),l.prototype.update=function(){r.prototype.update.call(this)},l.prototype.draw=function(t,e){r.prototype.draw.call(this,t,e)},l.prototype.getHitBox=function(){return{x:this.x+this.width/2/2,y:this.y+this.height/9,width:this.width/2,height:this.height/9*8}},l.prototype.getSkill1=function(){return"scratch"},l.prototype.drawPortrait=function(t,e,n,i,o){var r=this.rectangles[18];t.drawImage(this.image,r.x,r.y,r.width,r.height,e,n,i,o)},l);function l(t,e){var n=r.call(this,t,e)||this;return n.image=e,n.rectangles=s.splitSprite(e,9,4),n.animationController.addAnimation("up",0,8,150),n.animationController.addAnimation("left",9,17,150),n.animationController.addAnimation("down",18,26,150),n.animationController.addAnimation("right",27,35,150),n.animationController.addAnimation("stand",18,18,100),n.animationController.setAnim("stand"),n.rightPadding=5,n.leftPadding=5,n.topPadding=10,n.energy=4,n}n.default=h},{"../../../handlers/imageHandler":50,"./enemy":21}],21:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../character"),s=(r=a.default,o(h,r),h.prototype.draw=function(t,e){this.eyeBackground&&this.eyeBackground.draw(t,e),r.prototype.draw.call(this,t,e)},h.prototype.setEye=function(t){this.eyeBackground=t},h.prototype.setTarget=function(t){this.target=t,this.eyeBackground.makeEyeRed()},h.prototype.deleteTarget=function(){this.target=null,this.eyeBackground.image=null},h.prototype.setAnimation=function(t){this.animationController.setAnim(t)},h.prototype.update=function(){this.eyeBackground.x=this.x,this.eyeBackground.y=this.y,0<this.velX?this.animationController.setAnim("right"):this.velX<0?this.animationController.setAnim("left"):this.velY<0?this.animationController.setAnim("up"):0<this.velY&&this.animationController.setAnim("down")},h.prototype.drawPortrait=function(t,e,n,i,o){},h.prototype.isEnemy=function(){return!0},h);function h(t,e){var n=r.call(this,t,e)||this;return n.setZIndex(30),n.isAlive=!0,n}n.default=s},{"../character":19}],22:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../../module/context/core/gameObjects/image-game-object"),s=t("../../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.draw=function(t,e){this.image&&t.drawImage(this.image,this.x+10,this.y-10,this.width-20,this.height-20)},l.prototype.makeEyeRed=function(){this.image=s.default.getInstance().assetManager.getLoadedImage("eye-red")},l.prototype.makeEyeWhite=function(){this.image=s.default.getInstance().assetManager.getLoadedImage("eye")},l);function l(t,e){return void 0===e&&(e=null),r.call(this,t,e)||this}n.default=h},{"../../../../module/context/core/gameObjects/image-game-object":8,"../../../../module/context/generals/global":13}],23:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./enemy"),s=t("../../../handlers/imageHandler"),h=(r=a.default,o(l,r),l.prototype.update=function(){r.prototype.update.call(this)},l.prototype.draw=function(t,e){r.prototype.draw.call(this,t,e)},l.prototype.getHitBox=function(){return{x:this.x+this.width/3/2,y:this.y+this.height/2,width:this.width/3*2,height:this.height/2}},l.prototype.getSkill1=function(){return"scratch"},l.prototype.drawPortrait=function(t,e,n,i,o){var r=this.rectangles[12];t.drawImage(this.image,r.x,r.y,r.width,r.height,e,n,i,o)},l);function l(t,e){var n=r.call(this,t,e)||this;return n.image=e,n.rectangles=s.splitSprite(e,4,4),n.animationController.addAnimation("down",0,3,200),n.animationController.addAnimation("left",4,7,200),n.animationController.addAnimation("right",8,11,200),n.animationController.addAnimation("up",12,15,200),n.animationController.addAnimation("stand",12,12,200),n.animationController.setAnim("stand"),n.energy=2,n}n.default=h},{"../../../handlers/imageHandler":50,"./enemy":21}],24:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/gameObjects/game-object"),s=(r=a.default,o(h,r),h.prototype.draw=function(t,e){t.font="bold "+this.fontSize+"pt arial",t.fillStyle=this.color,t.fillText(this.text,this.x,this.y)},h.prototype.update=function(){},h.prototype.setColor=function(t){return this.color=t,this},h.prototype.setText=function(t){return this.text=t,this},h.prototype.setFontSize=function(t){return this.fontSize=t,this},h);function h(t,e){var n=r.call(this,{x:t.x,y:t.y,width:0,height:0})||this;return n.setZIndex(60),n.color="black",n.fontSize=10,n.text=e,n}n.default=s},{"../../../module/context/core/gameObjects/game-object":7}],25:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/gameObjects/animate-game-object"),s=t("../../handlers/imageHandler"),h=t("../../../module/context/generals/global"),l=t("../../handlers/trueRandom"),u=(r=a.default,o(c,r),c.prototype.draw=function(t,e){var n=this.x+.5*this.width,i=this.y+.5*this.height;t.save(),t.translate(n,i),t.rotate(Math.PI/180*this.rotation),t.translate(-n,-i),r.prototype.draw.call(this,t,e),t.restore()},c.prototype.onFrameChanged=function(t){3==t&&this.destroy()},c.prototype.update=function(){r.prototype.update.call(this),this.rotation=(this.rotation+3)%360},c);function c(t){var e=r.call(this,t,h.default.getInstance().assetManager.loadedImage.hit)||this;e.setZIndex(110),e.rectangles=s.splitSprite(e.image,4,1),e.animationController.addAnimation("hit",0,3,100),e.animationController.setAnim("hit"),e.animationController.addFrameListener(e);var n=new l.default;return n.randSeed(),e.rotation=(n.randomNumber(0,359)+1)%360,e.isOverlay=!0,e}n.default=u},{"../../../module/context/core/gameObjects/animate-game-object":6,"../../../module/context/generals/global":13,"../../handlers/imageHandler":50,"../../handlers/trueRandom":55}],26:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a,s=t("../../../module/context/core/gameObjects/image-game-object"),h=t("../../../module/context/generals/global");(a=r=n.MouseMode||(n.MouseMode={}))[a.NORMAL=0]="NORMAL",a[a.ATTACK=1]="ATTACK",a[a.BUSY=2]="BUSY";var l,u=(l=s.default,o(c,l),c.prototype.update=function(){l.prototype.update.call(this),this.mode==r.BUSY?this.rotation=(this.rotation+2)%360:this.rotation=0},c.prototype.draw=function(t,e){var n=this.x+this.width/2,i=this.y+this.height/2;t.save(),t.translate(n,i),t.rotate(Math.PI/180*this.rotation),t.translate(-n,-i),l.prototype.draw.call(this,t,e),t.restore()},c.prototype.setAvailable=function(t){this.mode==r.NORMAL&&this.available!=t&&(this.available=t,this.available?this.image=h.default.getInstance().assetManager.getLoadedImage("normal"):this.image=h.default.getInstance().assetManager.getLoadedImage("unavailable"))},c.prototype.setMode=function(t){if(this.mode!=t)switch(this.mode=t,this.mode){case r.NORMAL:this.image=h.default.getInstance().assetManager.getLoadedImage("normal");break;case r.ATTACK:this.image=h.default.getInstance().assetManager.getLoadedImage("sword");break;case r.BUSY:this.image=h.default.getInstance().assetManager.getLoadedImage("busy")}},c);function c(t){var e=l.call(this,t,h.default.getInstance().assetManager.getLoadedImage("normal"))||this;return e.isOverlay=!0,e.available=!0,e.mode=r.NORMAL,e.rotation=0,e}n.default=u},{"../../../module/context/core/gameObjects/image-game-object":8,"../../../module/context/generals/global":13}],27:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/gameObjects/image-game-object"),s=t("../../../module/context/generals/global"),h=(r=a.default,o(l,r),l);function l(t){return r.call(this,t,s.default.getInstance().assetManager.getLoadedImage("door"))||this}n.default=h},{"../../../module/context/core/gameObjects/image-game-object":8,"../../../module/context/generals/global":13}],28:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./player"),s=t("../../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.draw=function(t,e){r.prototype.draw.call(this,t,e)},l.prototype.getSkill1=function(){return"teleport"},l.prototype.onUsingSkill1=function(){this.animationController.setAnim("meditate")},l.prototype.getCharacter=function(){return"esper"},l);function l(t){return r.call(this,t,s.default.getInstance().assetManager.getLoadedImage("player-esper"))||this}n.default=h},{"../../../../module/context/generals/global":13,"./player":31}],29:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s,r=t("./player"),a=t("../../../../module/context/generals/global"),h=t("../../../../module/context/generals/point"),l=t("../../../handlers/calculator"),u=(s=r.default,o(c,s),c.prototype.draw=function(t,e){s.prototype.draw.call(this,t,e);var n=new h.default(this.getMiddlePoint().x,this.getMiddlePoint().y),i=l.default.calculateVelocity(n,this.mousePoint),o=180+Math.atan2(i.x,i.y)/(2*Math.PI)*360*-1;n.x+=.5*i.x-this.width/2,n.y+=.5*i.y-this.height/2;var r=n.x+.5*this.width,a=n.y+.5*this.height;t.save(),t.translate(r,a),t.rotate(Math.PI/180*o),t.translate(-r,-a),this.showBow&&t.drawImage(this.bowImage,n.x,n.y,this.width,this.height),t.restore()},c.prototype.getSkill1=function(){return"shoot"},c.prototype.onUsingSkill1=function(){this.animationController.setAnim("shoot"),this.showBow=!0},c.prototype.onUsingMove=function(){s.prototype.onUsingMove.call(this),this.showBow=!1},c.prototype.getCharacter=function(){return"assassin"},c);function c(t){var e=s.call(this,t,a.default.getInstance().assetManager.getLoadedImage("player-killer"))||this;return e.bowImage=a.default.getInstance().assetManager.getLoadedImage("bow-arrow"),e.showBow=!1,e}n.default=u},{"../../../../module/context/generals/global":13,"../../../../module/context/generals/point":16,"../../../handlers/calculator":49,"./player":31}],30:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./player"),s=t("../../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.draw=function(t,e){r.prototype.draw.call(this,t,e)},l.prototype.getSkill1=function(){return"spy"},l.prototype.onUsingSkill1=function(){this.animationController.setAnim("meditate")},l.prototype.getCharacter=function(){return"spy"},l);function l(t){return r.call(this,t,s.default.getInstance().assetManager.getLoadedImage("player-spy"))||this}n.default=h},{"../../../../module/context/generals/global":13,"./player":31}],31:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s,h=t("../../../handlers/imageHandler"),l=t("../../../../module/context/generals/point"),r=t("../character"),a=t("../../scenes/dummy-scene"),u=t("../../../../module/context/generals/global"),c=(s=r.default,o(d,s),d.prototype.setAnimation=function(t){this.animationController.setAnim(t)},Object.defineProperty(d.prototype,"mousePoint",{get:function(){return this._mousePoint},enumerable:!0,configurable:!0}),d.prototype.drawFire=function(t,e,n,i){var o=this.x+.5*n,r=this.y+.5*n;t.save(),t.translate(o,r),t.rotate(Math.PI/180*(this.fireRotation+i)),t.translate(-o,-r),t.drawImage(this.pet,e.x,e.y,n,n),t.restore()},d.prototype.draw=function(t,e){s.prototype.draw.call(this,t,e),this.fireRotation=this.fireRotation+2,this.pet&&this.drawFire(t,new l.default(this.x,this.y),a.default.tileSize/3,0),t.font="bold 12pt arial",t.fillStyle="white",t.textAlign="center",t.fillText(this.name,this.getMiddlePoint().x,this.y+this.height-10),t.textAlign="start"},d.prototype.setTile=function(t,e){this.tileX=t,this.tileY=e},d.prototype.setMousePoint=function(t){this._mousePoint=t},d.prototype.getHitBox=function(){return{x:this.x+this.width/4/2,y:this.y+this.height/4/2,width:this.width/4*3,height:this.height/4*3}},d.prototype.drawPortrait=function(t,e,n,i,o){var r=this.rectangles[130];t.drawImage(this.image,r.x,r.y,r.width,r.height,e,n,i,o)},d.prototype.onUsingMove=function(){this.animationController.setAnim("idle")},d.prototype.isEnemy=function(){return!1},d);function d(t,e){var n=s.call(this,t,e)||this;n.velX=0,n.velY=0,n.setZIndex(30),n.rectangles=h.splitSprite(n.image,13,21),n.animationController.addAnimation("up",104,112,100),n.animationController.addAnimation("left",117,125,100),n.animationController.addAnimation("down",130,138,100),n.animationController.addAnimation("right",143,151,100),n.animationController.addAnimation("meditate",28,28,100),n.animationController.addAnimation("shoot",238,238,100),n.animationController.addAnimation("idle",130,130,100),n.animationController.setAnim("idle"),n.fireRotation=0,d.exort=0,n.rightPadding=10,n.leftPadding=10,n.topPadding=20,n.isAlive=!0,n.energy=4,n.setMousePoint(new l.default);var i=n.getCharacter(),o=sessionStorage.getItem("character-data"),r=o?JSON.parse(o):{},a=r[i]?r[i].pet:"";return n.name=r[i]?r[i].name:"",""!=a&&(n.pet=u.default.getInstance().assetManager.getLoadedImage(a)),n}n.default=c},{"../../../../module/context/generals/global":13,"../../../../module/context/generals/point":16,"../../../handlers/imageHandler":50,"../../scenes/dummy-scene":40,"../character":19}],32:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./projectile"),s=t("../../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.draw=function(t){var e=this.x+.5*this.width,n=this.y+.5*this.height;r.prototype.draw.call(this,t),t.save(),t.translate(e,n),t.rotate(Math.PI/180*this.rotation),t.translate(-e,-n),t.drawImage(this.image,this.x,this.y,this.width,2*this.height),t.restore()},l.prototype.onHit=function(t){},l);function l(t,e){var n=r.call(this,t,e)||this;return n.image=s.default.getInstance().assetManager.getLoadedImage("arrow"),n.rotation=180+Math.atan2(e.x,e.y)/(2*Math.PI)*360*-1,n}n.default=h},{"../../../../module/context/generals/global":13,"./projectile":33}],33:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../../module/context/generals/global"),s=t("../../../handlers/trueRandom"),h=t("../../../../module/context/core/gameObjects/game-object"),l=(r=h.default,o(u,r),u.prototype.setSpeed=function(t){return this.speed=t,this},u.prototype.draw=function(t){},u.prototype.update=function(){this.x+=this.velocity.x*this.speed,this.y+=this.velocity.y*this.speed},u.prototype.checkOutOfRange=function(){(this.x<0||this.y<0||this.x+this.width>a.default.getInstance().width||this.y+this.height>a.default.getInstance().height)&&this.destroy()},u);function u(t,e){var n=r.call(this,t)||this;return n.speed=2,n.velocity=e,n.trueRandom=new s.default,n.trueRandom.randSeed(),n}n.default=l},{"../../../../module/context/core/gameObjects/game-object":7,"../../../../module/context/generals/global":13,"../../../handlers/trueRandom":55}],34:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../handlers/imageHandler"),s=t("../../../../module/context/generals/global"),h=t("../../../../module/context/core/gameObjects/animate-game-object"),l=(r=h.default,o(u,r),u.prototype.addFrameListener=function(t){this.animationController.addFrameListener(t)},u.prototype.draw=function(t,e){r.prototype.draw.call(this,t,e)},u);function u(t){var e=r.call(this,t,s.default.getInstance().assetManager.getLoadedImage("light"))||this;return e.setZIndex(31),e.rectangles=a.splitSprite(e.image,5,6),e.animationController.addAnimation("burn",0,29,80),e.animationController.setAnim("burn"),e}n.default=l},{"../../../../module/context/core/gameObjects/animate-game-object":6,"../../../../module/context/generals/global":13,"../../../handlers/imageHandler":50}],35:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/gameObjects/game-object"),s=(r=a.default,o(h,r),Object.defineProperty(h.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t},enumerable:!0,configurable:!0}),h.prototype.draw=function(t,e){t.fillStyle=this.gameColor,this.nowCol&&(t.fillStyle="orange"),t.globalAlpha=this._opacity,t.fillRect(this.x,this.y,this.width,this.height),t.globalAlpha=1},h.prototype.update=function(){this.nowCol=!1},h);function h(t,e){var n=r.call(this,t)||this;return n.gameColor=e,n.nowCol=!1,n}n.default=s},{"../../../module/context/core/gameObjects/game-object":7}],36:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../handlers/timeCounter"),s=t("../../../module/context/core/scene/sceneEngine"),h=t("./gameText"),l=(r=h.default,o(u,r),u.prototype.draw=function(t,e){this.setColor("white"),r.prototype.draw.call(this,t,e)},u.prototype.update=function(){this.y+=this.verticalMovSpeed,this.timeCounter.updateTimeCounter(s.default.getInstance().deltaTimeMilli())&&this.destroy()},u);function u(t,e){var n=r.call(this,t,e)||this;return n.setZIndex(60),n.timeCounter=new a.default(1e3),n.verticalMovSpeed=-.5,n.isOverlay=!0,n}n.default=l},{"../../../module/context/core/scene/sceneEngine":11,"../../handlers/timeCounter":54,"./gameText":24}],37:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../../module/context/core/gameObjects/image-game-object"),s=t("../../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.draw=function(t,e){t.drawImage(this.image,this.x,this.y,this.width,this.height),t.globalAlpha=.3,t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height),t.globalAlpha=1,t.strokeStyle="black",t.strokeRect(this.x,this.y,this.width,this.height)},l.prototype.update=function(){},l);function l(t){return r.call(this,t,s.default.getInstance().assetManager.getLoadedImage("groundtile"))||this}n.default=h},{"../../../../module/context/core/gameObjects/image-game-object":8,"../../../../module/context/generals/global":13}],38:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a,s,h=t("../../../../module/context/core/gameObjects/rectangle-game-object"),l=t("../../../../module/context/generals/global");(a=r=n.TileType||(n.TileType={}))[a.WALL=0]="WALL",a[a.PATH=1]="PATH",(s=n.TileObject||(n.TileObject={}))[s.EMPTY=0]="EMPTY",s[s.PLAYER1=1]="PLAYER1",s[s.PLAYER2=2]="PLAYER2",s[s.PLAYER3=3]="PLAYER3",s[s.SKELETON=4]="SKELETON",s[s.SLIME=5]="SLIME",s[s.DOOR=6]="DOOR";var u,c=(u=h.default,o(d,u),d.prototype.reinitFloodChar=function(){"W"==this.char?this.floodChar="#":"#"==this.char&&(this.floodChar="*")},d.prototype.reinitFloodNumber=function(){this.floodNumber=0},d.prototype.init=function(){this.totalWeight=999999,this.parentX=-1,this.parentY=-1,this.isOpen=!1,this.path=!1},d.prototype.setChar=function(t){"#"===(this.char=t)?this.baseWeight=r.PATH:"W"===t&&(this.baseWeight=r.WALL)},d.prototype.draw=function(t,e){u.prototype.draw.call(this,t,e),t.drawImage(l.default.getInstance().assetManager.getLoadedImage("groundtile"),this.x,this.y,this.width,this.height),t.strokeStyle="black",t.strokeRect(this.x,this.y,this.width,this.height),"W"==this.char&&(t.globalAlpha=.3,t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height),t.globalAlpha=1,t.drawImage(l.default.getInstance().assetManager.getLoadedImage("pillar"),this.x+2,this.y+2-40,this.width-4,this.height-4+40))},d.prototype.update=function(){},d);function d(t,e,n,i,o){var r=u.call(this,{x:n*i,y:e*i,width:i,height:i})||this;return r.init(),r.xMap=n,r.yMap=e,r.setChar(t),r.point=o,"#"==t?r.setZIndex(-1):"W"==t&&r.setZIndex(40),r}n.default=c},{"../../../../module/context/core/gameObjects/rectangle-game-object":9,"../../../../module/context/generals/global":13}],39:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/scene/scene"),m=t("../../../module/context/core/scene/sceneEngine"),s=t("../../../module/context/generals/point"),p=t("../../../module/context/core/gameObjects/rectangle-game-object"),h=t("../../handlers/timeCounter"),v=t("./dummy-scene"),l=(r=a.default,o(u,r),u.prototype.translateScreenPointToCoordinate=function(t){return new s.default(t.x-this.translate.x,t.y-this.translate.y)},u.prototype.getIntersection=function(t,e){var n=t.a.x,i=t.a.y,o=t.b.x-t.a.x,r=t.b.y-t.a.y,a=e.a.x,s=e.a.y,h=e.b.x-e.a.x,l=e.b.y-e.a.y,u=Math.sqrt(o*o+r*r),c=Math.sqrt(h*h+l*l);if(o/u==h/c&&r/u==l/c)return null;var d=(o*(s-i)+r*(n-a))/(h*r-l*o),p=(a+h*d-n)/o;return p<0||d<0||1<d?null:{x:n+o*p,y:i+r*p,param:p}},u.prototype.addBackgroundGameObject=function(t){this.backgroundGameObject.push(t),this.reorderBackgroundZIndex()},u.prototype.reorderBackgroundZIndex=function(){this.backgroundGameObject.sort(function(t,e){return t.zIndex-e.zIndex})},u.prototype.destroyBackgroundGameObject=function(t){t.setDestroyed(!0);var e=this.backgroundGameObject.indexOf(t);0<=e&&this.backgroundGameObject.splice(e,1)},u.prototype.getSightPolygon=function(t,e){for(var n,i,o,r=(n=this.processedSegments,i=[],n.forEach(function(t){i.push(t.a,t.b)}),i),a=(o={},r.filter(function(t){var e=t.x+","+t.y;return!(e in o)&&(o[e]=!0)})),s=[],h=0;h<a.length;h++){var l=a[h],u=Math.atan2(l.y-e,l.x-t);l.angle=u,s.push(u-1e-5,u,u+1e-5)}for(var c=[],h=0;h<s.length;h++){for(var d=s[h],p={a:{x:t,y:e},b:{x:t+Math.cos(d),y:e+Math.sin(d)}},f=null,y=0;y<this.processedSegments.length;y++){var g=this.getIntersection(p,this.processedSegments[y]);g&&(!f||g.param<f.param)&&(f=g)}f&&(f.angle=d,c.push(f))}return c=c.sort(function(t,e){return t.angle-e.angle})},u.prototype.drawPolygon=function(t,e,n){e.fillStyle=n,e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++){var o=t[i];e.lineTo(o.x,o.y)}e.fill()},u.prototype.getCurrentScreen=function(){var t=m.default.getInstance().canvasController;return{x:-this.translate.x,y:-this.translate.y,width:t.getWidthCanvas(),height:t.getHeightCanvas()}},u.prototype.getPolygonFromLightSources=function(){for(var t=[],e=[],n=new p.default(this.getCurrentScreen()),i=new p.default(new p.default({x:-200,y:-200,width:v.default.horizontalCount*v.default.tileSize+400,height:v.default.verticalCount*v.default.tileSize+400})),o=0,r=this.segments;o<r.length;o++){var a=r[o];a.isIn(n)&&e.push(a)}if(e=(e=e.concat(n.getSegments())).concat(i.getSegments()),this.processedSegments=e,0<this.processedSegments.length){for(var s=0,h=this.lightSources;s<h.length;s++){var l=h[s];t.push(this.getSightPolygon(l.x,l.y))}for(var u=0,c=this.gameObjectLight;u<c.length;u++){var d=c[u].getMiddlePoint();t.push(this.getSightPolygon(d.x,d.y))}}return t},u.prototype.processRender=function(e,n){var i=this;this.ctxR.save(),this.ctxB.save(),e.save(),e.translate(this.translate.x,this.translate.y),this.ctxR.translate(this.translate.x,this.translate.y),this.ctxB.translate(this.translate.x,this.translate.y);var t=g(this.getGameObject()),o=this.getCurrentScreen();this.ctxR.clearRect(o.x,o.y,o.width,o.height),this.ctxB.clearRect(o.x,o.y,o.width,o.height);for(var r=0,a=this.masks;r<a.length;r++){var s=a[r];this.ctxB.fillStyle="purple",this.ctxB.fillRect(s.x,s.y,s.width,s.height)}e.fillStyle="black",e.fillRect(10*-v.default.tileSize,10*-v.default.tileSize,v.default.horizontalCount*v.default.tileSize+20*v.default.tileSize,v.default.verticalCount*v.default.tileSize+20*v.default.tileSize);for(var h=0,l=g(this.backgroundGameObject);h<l.length;h++){var u=l[h];u.isVisible&&u.draw(e,n)}this.polygonTime.updateTimeByCurrentTimeMili(+n)&&(this.polygons=this.getPolygonFromLightSources());for(var c=0,d=this.polygons;c<d.length;c++){var p=d[c];this.drawPolygon(p,this.ctxB,"#fff")}t.forEach(function(t){t.isVisible&&t.draw(i.ctxR,n)});for(var f=0,y=this.lightSources;f<y.length;f++)y[f];this.obss.forEach(function(t){i.ctxB.fillRect(t.x,t.y,t.width,t.height)}),this.ctxB.restore(),this.ctxB.globalCompositeOperation="source-in",this.ctxB.drawImage(this.renderCanvas,0,0,m.default.getInstance().canvas.width,m.default.getInstance().canvas.height),this.ctxB.globalCompositeOperation="source-over",e.restore(),e.drawImage(this.backgroundCanvas,0,0,m.default.getInstance().canvas.width,m.default.getInstance().canvas.height),this.drawOverlay(e),e.save(),e.translate(this.translate.x,this.translate.y),t.forEach(function(t){t.isOverlay&&t.draw(e,n)}),e.restore(),this.onRender(e),this.ctxR.restore()},u);function u(){var t=r.call(this)||this;t.obss=[],t.translate=new s.default(0,0),t.renderCanvas=document.createElement("canvas"),t.backgroundCanvas=document.createElement("canvas"),t.renderCanvas.width=m.default.getInstance().canvas.width,t.renderCanvas.height=m.default.getInstance().canvas.height,t.backgroundCanvas.width=m.default.getInstance().canvas.width,t.backgroundCanvas.height=m.default.getInstance().canvas.height;var e=t.renderCanvas.getContext("2d"),n=t.backgroundCanvas.getContext("2d");if(null===e||null===n)throw Error;return t.ctxR=e,t.ctxB=n,t.segments=[],t.processedSegments=[],t.mouse=new s.default(0,0),t.masks=[],t.lightSources=[],t.polygons=[],t.polygonTime=new h.default(1),t.backgroundGameObject=[],t.gameObjectLight=[],t}n.default=l},{"../../../module/context/core/gameObjects/rectangle-game-object":9,"../../../module/context/core/scene/scene":10,"../../../module/context/core/scene/sceneEngine":11,"../../../module/context/generals/point":16,"../../handlers/timeCounter":54,"./dummy-scene":40}],40:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};Object.defineProperty(n,"__esModule",{value:!0});var u,c=t("../../../module/context/core/scene/sceneEngine"),d=t("../model/test-box"),p=t("../../../module/context/generals/point"),r=t("./custom-light-scene"),f=t("../../../module/context/generals/quadTree"),y=t("../../../module/context/generals/rectangle"),g=t("../../handlers/map-creator"),m=t("../model/tiles/backTile"),v=t("../model/tiles/tile"),x=t("../../../module/context/generals/global"),b=t("../model/enemies/Skeleton"),_=t("../model/enemies/red-eye"),w=t("../model/players/player-spy"),O=t("../model/outdoor"),M=t("../model/players/player-killer"),j=t("../model/players/player-esper"),P=t("../model/players/player"),T=t("../../../module/context/core/activities/multiple-activities"),s=t("../../general/PlayerMovementActivity"),h=t("../../general/EnemyMovementActivity"),C=t("../../general/skill-state"),I=t("../model/textEffect"),S=t("../../handlers/calculator"),A=t("../../handlers/projectileHandler"),l=t("../../general/PointMovementActivity"),k=t("./gameOverScene"),E=t("../../handlers/keyboard-input-handler"),L=t("../model/hitEffect"),R=t("../model/enemies/slime"),z=t("../../general/TeleportActivity"),W=t("../model/mouse-cursor"),H=(u=r.default,o(G,u),G.prototype.onCreated=function(){this.hoverTile=new d.default({x:0,y:0,width:G.tileSize,height:G.tileSize},"green"),this.hoverTile.opacity=.3,this.hoverTile.setVisible(!0),this.hoverTile.setZIndex(1),this.addGameObject(this.hoverTile),this.addBackgroundGameObject(this.hoverTile),this.mouseCursor=new W.default({x:0,y:0,width:G.tileSize/2.5,height:G.tileSize/2.5}),this.addGameObject(this.mouseCursor),this.keyboardInputHandler=new E.default(1),this.projectiles=[],this.projectileHandler=new A.default,this.currentEnergy=0,this.players=[],this.enemies=[],this.boxs=[],this.turns=[],this.ward=null,this.segments=[];var t=new g.default(G.verticalCount,G.horizontalCount).getMapRandomized(G.tileSize);this.maps=t;for(var e=x.default.getInstance().assetManager,n=0,i=t;n<i.length;n++)for(var o=0,r=i[n];o<r.length;o++){var a,s,h,l=r[o];l&&("W"===l.char?(this.segments=this.segments.concat(l.getSegments()),this.backgroundGameObject.push(l),this.addGameObject(l),this.boxs.push(l)):(this.addBackgroundGameObject(new m.default({x:l.x,y:l.y,width:l.width,height:l.height})),this.addGameObject(l)),l.point===v.TileObject.SKELETON?(a=new _.default({x:l.x,y:l.y,width:l.width,height:l.height},null),(s=new b.default({x:l.x,y:l.y,width:l.width,height:l.height},e.getLoadedImage("skeleton"))).setEye(a),this.addGameObject(s),this.enemies.push(s)):l.point===v.TileObject.SLIME?(a=new _.default({x:l.x,y:l.y,width:l.width,height:l.height},null),(s=new R.default({x:l.x,y:l.y,width:l.width,height:l.height},e.getLoadedImage("slime"))).setEye(a),this.addGameObject(s),this.enemies.push(s)):l.point===v.TileObject.PLAYER1?(h=new w.default({x:l.x,y:l.y,width:l.width,height:l.height}),this.addGameObject(h),this.gameObjectLight.push(h),this.players.push(h)):l.point===v.TileObject.PLAYER2?(h=new j.default({x:l.x,y:l.y,width:l.width,height:l.height}),this.addGameObject(h),this.gameObjectLight.push(h),this.players.push(h)):l.point===v.TileObject.PLAYER3?(h=new M.default({x:l.x,y:l.y,width:l.width,height:l.height}),this.addGameObject(h),this.gameObjectLight.push(h),this.players.push(h)):l.point===v.TileObject.DOOR&&(G.door=new O.default({x:l.x,y:l.y,width:l.width,height:l.height}),this.addGameObject(G.door)))}this.quadtree=new f.default(new y.default(-100,-100,G.horizontalCount*G.tileSize+100,G.verticalCount*G.tileSize+100),4),this.nextTurn()},G.prototype.fillTurn=function(){this.turns=this.turns.concat(this.players),this.turns=this.turns.concat(this.enemies)},G.prototype.nextTurn=function(){for(this.checkPlayer(),this.currentTurn&&this.useMove();0==this.turns.length&&this.fillTurn(),this.currentTurn=this.turns.shift(),0==this.currentTurn.isAlive;);this.currentEnergy=this.currentTurn.energy,this.currentTurn.isEnemy()||(this.mouseCursor.setMode(W.MouseMode.NORMAL),this.recenterCamera()),this.currentTurn.isEnemy()&&(this.mouseCursor.setMode(W.MouseMode.BUSY),this.enemyTurn()),this.useMove()},G.prototype.recenterCamera=function(){var t=this.currentTurn.getMiddlePoint().x,e=this.currentTurn.getMiddlePoint().y,n=c.default.getInstance().canvas;this.addActivity(new l.default(this.translate,new p.default(-(t-n.width/2),-(e-n.height/2)),1500))},G.prototype.checkEnemy=function(){for(var t=0,e=this.enemies;t<e.length;t++)for(var n=e[t],i=0,o=this.players;i<o.length;i++){var r=o[i];n.x==r.x&&n.y==r.y&&c.default.getInstance().updateScene(new k.default)}},G.prototype.movingEnemy=function(t,e,n){var i,o,r,a=this;void 0===n&&(n=0),0!=n&&0!=e.length?(i=e.shift(),o=new h.default(t,new p.default(i.x,i.y),3*G.tileSize),(r=new T.default).addActivity(o),r.then(function(){a.checkEnemy(),a.currentEnergy<=0||a.currentTurn.isEnemy()&&(a.currentEnergy--,0<a.currentEnergy?a.movingEnemy(t,e,n-1):a.nextTurn())}),this.addActivity(r)):this.currentTurn.isEnemy()&&this.nextTurn()},G.prototype.enemyTurn=function(){var t,e,n,i=this.currentTurn;null!=i.target?(t=Math.floor(i.target.x/G.tileSize),e=Math.floor(i.target.y/G.tileSize),0<(n=i.pathFind(this.maps,t,e)).length&&(n.shift(),this.movingEnemy(i,n,this.currentEnergy))):this.nextTurn()},G.prototype.onRender=function(t){var e=x.default.getInstance().assetManager,n=c.default.getInstance().canvas.height-200,i=c.default.getInstance().canvas.width/2;t.fillStyle="black",t.fillRect(i-100,n,100,100),this.currentTurn&&this.currentTurn.drawPortrait(t,i-100,n,100,100),t.drawImage(e.getLoadedImage("frame"),i-100,n,100,100),t.drawImage(e.getLoadedImage("move"),50+i,n,100,100),t.lineWidth=5,t.drawImage(e.getLoadedImage(this.currentTurn.getSkill1()),200+i,n,100,100),t.strokeStyle="green",this.currentSkillState==C.SkillState.move?t.strokeRect(50+i,n,100,100):this.currentSkillState==C.SkillState.skill1&&t.strokeRect(200+i,n,100,100);for(var o=0;o<this.currentEnergy;o++)t.drawImage(e.getLoadedImage("energy"),i-100+35*o,105+n,30,30);t.lineWidth=1},G.prototype.onUpdate=function(){var i=this;this.quadtree.clear(),this.quadtree.insertAll(this.boxs),this.quadtree.insertAll(this.enemies),this.checkEnemyVision();for(var t=a(this.projectiles),e=this,n=0,o=t;n<o.length;n++)!function(n){e.quadtree.retrieve(n).forEach(function(t){var e;t.isCollide(n)&&(i.addGameObject(new L.default({x:n.getMiddlePoint().x,y:n.getMiddlePoint().y,width:70,height:70})),i.destroyGameObject(n),n.destroy(),i.projectiles.splice(i.projectiles.indexOf(n),1),(t instanceof b.default||t instanceof R.default)&&(i.destroyGameObject(t),i.enemies.splice(i.enemies.indexOf(t),1),0<=(e=i.turns.indexOf(t))&&i.turns.splice(e,1)))})}(o[n]);var r=this.keyboardInputHandler;r.update(c.default.getInstance().deltaTimeMilli())&&(r.isInput("w")&&this.translate.y<400&&(this.translate.y+=10),r.isInput("a")&&this.translate.x<400&&(this.translate.x+=10),r.isInput("s")&&this.translate.y>-G.tileSize*G.verticalCount+c.default.getInstance().canvas.height-400&&(this.translate.y-=10),r.isInput("d")&&this.translate.x>-G.tileSize*G.horizontalCount+c.default.getInstance().canvas.width-400&&(this.translate.x-=10),this.refreshMouse())},G.prototype.checkEnemyVision=function(){for(var t=0,e=this.enemies;t<e.length;t++)for(var n=e[t],i=0,o=this.players;i<o.length;i++){for(var r=o[i],a=n.getMiddlePoint(),s=r.getMiddlePoint(),h=!0,l=0,u=this.segments;l<u.length;l++)u[l].doIntersect(a,s)&&(h=!1);h&&n.setTarget(r)}},G.prototype.refreshMouse=function(){var t=Math.floor((this.mouse.x-this.translate.x)/G.tileSize),e=Math.floor((this.mouse.y-this.translate.y)/G.tileSize),n=new p.default(this.mouse.x-this.translate.x,this.mouse.y-this.translate.y);this.mouseCursor.setX(this.mouse.x-this.translate.x),this.mouseCursor.setY(this.mouse.y-this.translate.y),this.maps[t]&&this.maps[t][e]&&"#"==this.maps[t][e].char?(this.hoverTile.setX(t*G.tileSize),this.hoverTile.setY(e*G.tileSize),this.hoverTile.setVisible(!0),this.mouseCursor.setAvailable(!0)):(this.hoverTile.setVisible(!1),this.mouseCursor.setAvailable(!1));for(var i=0,o=this.players;i<o.length;i++)o[i].setMousePoint(n)},G.prototype.mouseMove=function(t){var e=t.target.getBoundingClientRect();this.mouse.x=t.x-e.left,this.mouse.y=t.y-e.top,this.refreshMouse()},G.prototype.checkPlayer=function(){for(var t=0,e=a(this.players);t<e.length;t++){var n=e[t];if(n.x===G.door.x&&n.y===G.door.y){for(var i=0,o=this.enemies;i<o.length;i++){var r=o[i];r.target==n&&r.deleteTarget()}return this.players.splice(this.players.indexOf(n),1),this.destroyGameObject(n),0!=this.players.length||void c.default.getInstance().updateScene(new G)}}if(0!=this.players.length)return!1;c.default.getInstance().updateScene(new G)},G.prototype.movingPlayer=function(t,e,n){var i,o,r,a=this;void 0===n&&(n=0),0!=n&&0!=e.length?(i=e.shift(),o=new s.default(t,new p.default(i.x,i.y),3*G.tileSize),(r=new T.default).addActivity(o),r.then(function(){a.checkEnemy(),a.checkPlayer()?a.nextTurn():a.currentEnergy<=0||(a.currentEnergy--,0<a.currentEnergy?a.movingPlayer(t,e,n-1):a.nextTurn())}),this.addActivity(r)):this.checkPlayer()},G.prototype.drawOverlay=function(t){},G.prototype.mouseClick=function(t){var e=this;if(u.prototype.mouseClick.call(this,t),!(0<this.activities.length)&&this.currentTurn instanceof P.default){var n,i,o,r=t.target.getBoundingClientRect(),a=Math.floor((t.x-this.translate.x-r.left)/G.tileSize),s=Math.floor((t.y-this.translate.y-r.top)/G.tileSize);if(this.maps[a]&&this.maps[a][s])if(this.currentSkillState==C.SkillState.move){if("W"===this.maps[a][s].char)return void this.addGameObject(new I.default(this.currentTurn.getMiddlePoint(),"Cannot move to wall..."));this.moveWithMouseClick(a,s)}else if(this.currentSkillState==C.SkillState.skill1)if(this.currentTurn instanceof w.default){if("W"===this.maps[a][s].char)return void this.addGameObject(new I.default(this.currentTurn.getMiddlePoint(),"Cannot place ward in wall..."));null==this.ward?(this.ward=new _.default({x:a*G.tileSize,y:s*G.tileSize,width:G.tileSize,height:G.tileSize}),this.ward.makeEyeWhite(),this.gameObjectLight.push(this.ward),this.addGameObject(this.ward)):(this.ward.setX(a*G.tileSize),this.ward.setY(s*G.tileSize)),this.reduceEnergy(3),this.useMove()}else if(this.currentTurn instanceof j.default){if("W"===this.maps[a][s].char)return void this.addGameObject(new I.default(this.currentTurn.getMiddlePoint(),"Cannot teleport to wall..."));var h=new z.default(this.currentTurn,new p.default(a*G.tileSize,s*G.tileSize),this),l=new T.default;l.addActivity(h),l.then(function(){e.reduceEnergy(3),e.useMove(),e.checkPlayer()&&e.nextTurn()}),this.addActivity(l)}else this.currentTurn instanceof M.default&&(n=this.currentTurn.getMiddlePoint(),i=S.default.calculateVelocity(n,this.currentTurn.mousePoint),null!=(o=this.projectileHandler.createProjectile(n.x,n.y,i.x,i.y,c.default.getInstance().deltaTime()))&&(this.projectiles.push(o),this.addGameObject(o)),this.reduceEnergy(3),this.useMove())}},G.prototype.moveWithMouseClick=function(t,e){var n,i;this.currentTurn instanceof P.default&&0<(i=(n=this.currentTurn).pathFind(this.maps,t,e)).length&&(i.shift(),this.movingPlayer(n,i,this.currentEnergy))},G.prototype.keyDown=function(t){switch(this.keyboardInputHandler.addInput(t.key.toLowerCase()),t.key.toLocaleLowerCase()){case"1":this.useMove();break;case"2":if(!(3<=this.currentEnergy))return void this.addGameObject(new I.default(this.currentTurn.getMiddlePoint(),"Not enough energy..."));this.useSkill1()}},G.prototype.keyUp=function(t){u.prototype.keyUp.call(this,t),this.keyboardInputHandler.removeInput(t.key.toLowerCase())},G.prototype.reduceEnergy=function(t){this.currentEnergy-=t,this.currentEnergy<=0&&this.nextTurn()},G.prototype.useSkill1=function(){this.currentSkillState=C.SkillState.skill1,this.currentTurn.onUsingSkill1(),this.currentTurn instanceof M.default&&this.mouseCursor.setMode(W.MouseMode.ATTACK)},G.prototype.useMove=function(){this.currentSkillState=C.SkillState.move,this.currentTurn.onUsingMove(),this.currentTurn.isEnemy()||this.mouseCursor.setMode(W.MouseMode.NORMAL)},G.horizontalCount=30,G.verticalCount=25,G.tileSize=80,G);function G(){return null!==u&&u.apply(this,arguments)||this}n.default=H},{"../../../module/context/core/activities/multiple-activities":2,"../../../module/context/core/scene/sceneEngine":11,"../../../module/context/generals/global":13,"../../../module/context/generals/point":16,"../../../module/context/generals/quadTree":17,"../../../module/context/generals/rectangle":18,"../../general/EnemyMovementActivity":43,"../../general/PlayerMovementActivity":45,"../../general/PointMovementActivity":46,"../../general/TeleportActivity":47,"../../general/skill-state":48,"../../handlers/calculator":49,"../../handlers/keyboard-input-handler":51,"../../handlers/map-creator":52,"../../handlers/projectileHandler":53,"../model/enemies/Skeleton":20,"../model/enemies/red-eye":22,"../model/enemies/slime":23,"../model/hitEffect":25,"../model/mouse-cursor":26,"../model/outdoor":27,"../model/players/player":31,"../model/players/player-esper":28,"../model/players/player-killer":29,"../model/players/player-spy":30,"../model/test-box":35,"../model/textEffect":36,"../model/tiles/backTile":37,"../model/tiles/tile":38,"./custom-light-scene":39,"./gameOverScene":41}],41:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/scene/scene"),s=t("../../../module/context/core/scene/sceneEngine"),h=t("../model/gameText"),l=t("../model/test-box"),u=t("../../../module/context/generals/point"),c=t("./dummy-scene"),d=(r=a.default,o(p,r),p.prototype.onCreated=function(){var t=s.default.getInstance().canvas,e=new h.default(new u.default(t.width/2-200,t.height/2),"You are dead!"),n=new h.default(new u.default(t.width/2-300,t.height/2+200),"Press any key to restart");e.setColor("red"),e.setFontSize(50),n.setFontSize(40),n.setColor("white"),this.addGameObject(e),this.addGameObject(n),this.addGameObject(new l.default({x:0,y:0,width:t.width,height:t.height},"black").setZIndex(-1))},p.prototype.onRender=function(t){},p.prototype.onUpdate=function(){},p.prototype.keyDown=function(t){r.prototype.keyDown.call(this,t),s.default.getInstance().updateScene(new c.default)},p);function p(){return r.call(this)||this}n.default=d},{"../../../module/context/core/scene/scene":10,"../../../module/context/core/scene/sceneEngine":11,"../../../module/context/generals/point":16,"../model/gameText":24,"../model/test-box":35,"./dummy-scene":40}],42:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../../../module/context/core/scene/scene"),s=t("../../../module/context/generals/global"),h=(r=a.default,o(l,r),l.prototype.onCreated=function(){},l.prototype.onRender=function(t){t.fillStyle="black",t.fillText("Load asset...",10,20,100),t.fillText(s.default.getInstance().assetManager.doneCount+"/"+(s.default.getInstance().assetManager.ipaths.length+s.default.getInstance().assetManager.spaths.length),110,20)},l.prototype.onUpdate=function(){},l);function l(){return null!==r&&r.apply(this,arguments)||this}n.default=h},{"../../../module/context/core/scene/scene":10,"../../../module/context/generals/global":13}],43:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./GameObjectMovementActivity"),s=(r=a.default,o(h,r),h.prototype.updateActivity=function(t){var e=t/1e3*this.speed,n=this.finishPoint.x-this._gameObject.x,i=this.finishPoint.y-this._gameObject.y,o=Math.abs(n)+Math.abs(i);if(o<=e)return this._gameObject.x=this.finishPoint.x,this._gameObject.y=this.finishPoint.y,!0;var r=n/o*e,a=i/o*e;return this._gameObject.x+=r,this._gameObject.y+=a,0<r?this.enemy.setAnimation("right"):r<0?this.enemy.setAnimation("left"):0<a?this.enemy.setAnimation("down"):a<0&&this.enemy.setAnimation("up"),!1},h);function h(t,e,n){var i=r.call(this,t,e,n)||this;return i.enemy=t,i}n.default=s},{"./GameObjectMovementActivity":44}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"finishPoint",{get:function(){return this._finishPoint},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),o.prototype.updateActivity=function(t){var e=t/1e3*this.speed,n=this.finishPoint.x-this._gameObject.x,i=this.finishPoint.y-this._gameObject.y,o=Math.abs(n)+Math.abs(i);if(o<=e)return this._gameObject.x=this.finishPoint.x,this._gameObject.y=this.finishPoint.y,!0;var r=n/o*e,a=i/o*e;return this._gameObject.x+=r,this._gameObject.y+=a,!1},o);function o(t,e,n){this._finishPoint=e,this._speed=n,this._gameObject=t}n.default=i},{}],45:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./GameObjectMovementActivity"),s=(r=a.default,o(h,r),h.prototype.updateActivity=function(t){var e=t/1e3*this.speed,n=this.finishPoint.x-this._gameObject.x,i=this.finishPoint.y-this._gameObject.y,o=Math.abs(n)+Math.abs(i);if(o<=e)return this._gameObject.x=this.finishPoint.x,this._gameObject.y=this.finishPoint.y,!0;var r=n/o*e,a=i/o*e;return this._gameObject.x+=r,this._gameObject.y+=a,0<r?this.player.setAnimation("right"):r<0?this.player.setAnimation("left"):0<a?this.player.setAnimation("down"):a<0&&this.player.setAnimation("up"),!1},h);function h(t,e,n){var i=r.call(this,t,e,n)||this;return i.player=t,i}n.default=s},{"./GameObjectMovementActivity":44}],46:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"finishPoint",{get:function(){return this._finishPoint},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),o.prototype.updateActivity=function(t){var e=t/1e3*this.speed,n=this.finishPoint.x-this._point.x,i=this.finishPoint.y-this._point.y,o=Math.abs(n)+Math.abs(i);if(o<=e)return this._point.x=this.finishPoint.x,this._point.y=this.finishPoint.y,!0;var r=n/o*e,a=i/o*e;return this._point.x+=r,this._point.y+=a,!1},o);function o(t,e,n){this._finishPoint=e,this._speed=n,this._point=t}n.default=i},{}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../game/model/skills/light-animation"),o=(r.prototype.onFrameChanged=function(t){24==t?this.isTP=!0:29==t&&(this._scene.destroyGameObject(this.lightAnimation),this._isDone=!0)},Object.defineProperty(r.prototype,"finishPoint",{get:function(){return this._finishPoint},enumerable:!0,configurable:!0}),r.prototype.updateActivity=function(t){return this.isTP&&(this._gameObject.x=this.finishPoint.x,this._gameObject.y=this.finishPoint.y,this.isTP=!1),this._isDone},r);function r(t,e,n){this._finishPoint=e,this._gameObject=t,this._isDone=!1,this._scene=n,this.lightAnimation=new i.default({x:t.x-70,y:t.y-70,width:t.width+140,height:t.height+100}),this.lightAnimation.addFrameListener(this),this.isTP=!1,n.addGameObject(this.lightAnimation)}n.default=o},{"../game/model/skills/light-animation":34}],48:[function(t,e,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),(i=n.SkillState||(n.SkillState={}))[i.move=0]="move",i[i.skill1=1]="skill1"},{}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../module/context/generals/point"),i=(o.calculateSize=function(t,e,n){var i=new s.default;return i.x=Math.floor(e/t),i.y=Math.floor(n/t),i},o.calculateVelocity=function(t,e){new s.default;var n=e.x-t.x,i=e.y-t.y,o=Math.abs(n)+Math.abs(i),r=n/o*1,a=i/o*1;return new s.default(r,a)},o);function o(){}n.default=i},{"../../module/context/generals/point":16}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.splitSprite=function(t,e,n){for(var i=[],o=t.width/e,r=t.height/n,a=0;a<n;a++)for(var s=0;s<e;s++)i.push({x:o*s,y:r*a,width:o,height:r});return i};function i(){}n.default=i},{}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./timeCounter"),o=(r.prototype.update=function(t){return this._expiredTimeCounter.updateTimeCounter(t)&&this.inputMap.clear(),this._timeCounter.updateTimeCounter(t)},r.prototype.addInput=function(t){this._expiredTimeCounter.resetCounter(),this.inputMap.set(t,!0)},r.prototype.removeInput=function(t){this._expiredTimeCounter.resetCounter(),this.inputMap.set(t,!1)},r.prototype.isInput=function(t){return this.inputMap.get(t)},Object.defineProperty(r.prototype,"inputMap",{get:function(){return this._inputMap},enumerable:!0,configurable:!0}),r);function r(t){this._inputMap=new Map,this._timeCounter=new i.default(t),this._expiredTimeCounter=new i.default(1e3)}n.default=o},{"./timeCounter":54}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./trueRandom"),u=t("../game/model/tiles/tile"),c=t("../../module/context/generals/point"),d=t("./trueRandom"),o=(r.prototype.getMap=function(){return this.map},r.prototype.print=function(t){for(var e=0;e<this.HEIGHT;e++){for(var n="",i=0;i<this.WIDTH;i++)n+=t[e][i].floodChar;console.log(e+" "+n)}},r.prototype.init=function(){this.map=[];for(var t=0;t<this.HEIGHT;t++){this.map[t]=[];for(var e=0;e<this.WIDTH;e++)0==t||0==e||t==this.HEIGHT-1||e==this.WIDTH-1?this.map[t][e]=new u.default("#",e,t,20,u.TileObject.EMPTY):this.map[t][e]=new u.default("W",e,t,20,u.TileObject.EMPTY)}},r.prototype.floodFilling=function(t,e,n){"#"!==this.map[e][t].floodChar&&(this.map[e][t].floodChar="#",this.map[e][t].floodNumber=n,this.floodFilling(t+1,e,n+1),this.floodFilling(t-1,e,n+1),this.floodFilling(t,e+1,n+1),this.floodFilling(t,e-1,n+1))},r.prototype.allFloodFilled=function(){for(var t=0;t<this.HEIGHT;t++)for(var e=0;e<this.WIDTH;e++)if("*"==this.map[t][e].floodChar)return!1;return!0},r.prototype.reinitFloodChar=function(){for(var t=0;t<this.HEIGHT;t++)for(var e=0;e<this.WIDTH;e++)this.map[t][e].reinitFloodChar()},r.prototype.reinitFloodAll=function(){for(var t=0;t<this.HEIGHT;t++)for(var e=0;e<this.WIDTH;e++)this.map[t][e].reinitFloodChar(),this.map[t][e].reinitFloodNumber()},r.prototype.floodFirstFound=function(){for(var t=0,e=this.map;t<e.length;t++)for(var n=0,i=e[t];n<i.length;n++){var o=i[n];if("*"==o.floodChar)return void this.floodFilling(o.xMap,o.yMap,0)}},r.prototype.mapToPoint=function(){for(var t=[],e=0,n=this.map;e<n.length;e++)for(var i=0,o=n[e];i<o.length;i++){var r=o[i];t.push({x:r.xMap,y:r.yMap,num:r.floodNumber})}return t=t.sort(function(t,e){return e.num-t.num})},r.prototype.getMapRandomized=function(t){this.init();for(var e=[],n=0;n<this.HEIGHT;n++){this.map[n]=[];for(var i=0;i<this.WIDTH;i++)0==n||0==i||n==this.HEIGHT-1||i==this.WIDTH-1?(this.map[n][i]=new u.default("W",i,n,t,u.TileObject.EMPTY),this.map[n][i].setZIndex(100)):(this.map[n][i]=new u.default("#",i,n,t,u.TileObject.EMPTY),e.push(new c.default(i,n)))}var o=e.length;d.shuffleArray(e),this.reinitFloodAll();for(var r=0;r<o/5;r++)for(this.reinitFloodChar();;){var a=e.pop();if(this.map[a.y][a.x]=new u.default("W",a.x,a.y,t,u.TileObject.EMPTY),this.map[a.y][a.x].reinitFloodChar(),this.floodFirstFound(),this.allFloodFilled())break;this.map[a.y][a.x]=new u.default("#",a.x,a.y,t,u.TileObject.EMPTY),this.reinitFloodChar()}for(this.reinitFloodAll(),r=0;r<o/60;r++){var s=e.pop();this.map[s.y][s.x]=r%2==0?new u.default("#",s.x,s.y,t,u.TileObject.SKELETON):new u.default("#",s.x,s.y,t,u.TileObject.SLIME),this.reinitFloodChar(),this.floodFilling(s.x,s.y,1)}var h=this.mapToPoint();this.reinitFloodAll();var l=h[0];return this.map[l.x][l.y]=new u.default("#",l.y,l.x,t,u.TileObject.PLAYER1),this.floodFilling(l.y,l.x,1),l=h[1],this.map[l.x][l.y]=new u.default("#",l.y,l.x,t,u.TileObject.PLAYER2),l=h[2],this.map[l.x][l.y]=new u.default("#",l.y,l.x,t,u.TileObject.PLAYER3),l=this.mapToPoint()[0],this.map[l.x][l.y]=new u.default("#",l.y,l.x,t,u.TileObject.DOOR),this.map},r);function r(t,e){this.HEIGHT=20,this.WIDTH=20,this.WIDTH=t,this.HEIGHT=e,this.trueRandom=new i.default,this.trueRandom.randSeed(),this.init()}n.default=o},{"../../module/context/generals/point":16,"../game/model/tiles/tile":38,"./trueRandom":55}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("../game/model/projectiles/arrow"),s=t("../../module/context/core/scene/sceneEngine"),h=t("../game/scenes/dummy-scene"),l=t("../../module/context/generals/point"),i=(o.prototype.createProjectile=function(t,e,n,i,o){return this.spawn(t,e,n,i)},o.prototype.spawn=function(t,e,n,i){var o=h.default.tileSize/4,r=new a.default({x:t,y:e,width:o,height:o},new l.default(n,i));return r.setSpeed(5),r.setZIndex(20),t+=40*n,e+=40*i,r.setMiddlePoint(new l.default(t,e)),s.default.getInstance().injectGameObject(r),r},o);function o(){}n.default=i},{"../../module/context/core/scene/sceneEngine":11,"../../module/context/generals/point":16,"../game/model/projectiles/arrow":32,"../game/scenes/dummy-scene":40}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.resetCounter=function(){this.counter=0},o.prototype.updateTimeByCurrentTimeMili=function(t){if(-1!=this.previousTime){var e=t-this.previousTime;if(this.counter+=e,this.counter>=this.targetTime)return this.counter%=this.targetTime,this.previousTime=t,!0}return this.previousTime=t,!1},o.prototype.updateTimeCounter=function(t){return this.counter+=t,this.counter>=this.targetTime&&(this.counter%=this.targetTime,!0)},o.prototype.setPreviousTime=function(t){this.previousTime=t},o.prototype.setTargetTime=function(t){this.targetTime=t},o);function o(t){this.targetTime=t,this.counter=0,this.previousTime=-1}n.default=i},{}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.randSeed=function(){this.seed=Math.floor(1e4*Math.random())},o.prototype.random=function(){var t=1e4*Math.sin(this.seed++);return t-Math.floor(t)},o.prototype.randomNumber=function(t,e){return Math.floor(this.random()*(e-t+1)+t)},o);function o(t){void 0===t&&(t=1),this.seed=t}n.default=i,n.shuffleArray=function(t){for(var e,n,i=t.length;0!=i;)n=Math.floor(Math.random()*i),i--,e=[t[n],t[i]],t[i]=e[0],t[n]=e[1];return t}},{}]},{},[1]);